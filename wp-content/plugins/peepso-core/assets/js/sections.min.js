!function a(r,o,d){function f(t,e){if(!o[t]){if(!r[t]){var i="function"==typeof require&&require;if(!e&&i)return i(t,!0);if(s)return s(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var l=o[t]={exports:{}};r[t][0].call(l.exports,function(e){return f(r[t][1][e]||e)},l,l.exports,a,r,o,d)}return o[t].exports}for(var s="function"==typeof require&&require,e=0;e<d.length;e++)f(d[e]);return f}({1:[function(e,t,i){"use strict";var n,l=(n=e("./profile"))&&n.__esModule?n:{default:n};document.addEventListener("DOMContentLoaded",function(){l.default.init()})},{"./profile":3}],2:[function(e,t,d){(function(e){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var h=t("undefined"!=typeof window?window._:void 0!==e?e._:null),a=t("undefined"!=typeof window?window.jQuery:void 0!==e?e.jQuery:null),y="undefined"!=typeof window?window.peepso:void 0!==e?e.peepso:null,$="undefined"!=typeof window?window.peepsodata:void 0!==e?e.peepsodata:null;function t(e){return e&&e.__esModule?e:{default:e}}function l(e){return function(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=$.sections&&$.sections.profile&&$.sections.profile.textSaveAllErrorNotice,i=function(){function t(e){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.$container=(0,a.default)(e),this.$btnEditAll=this.$container.find(".ps-js-btn-edit-all"),this.$btnSaveAll=this.$container.find(".ps-js-btn-save-all").hide(),this.$fields=this.$container.find(".ps-js-profile-item").filter(function(){return(0,a.default)(this).find(".ps-list-info-content-form").length}),this.$fields.length||this.$btnEditAll.hide(),this.$fields.each(function(e,t){return i.fieldInit(t)}),this.fieldChanged=[],this.fieldChangedHandler=function(e){return!!i.fieldChanged.length||e},y.observer.addFilter("beforeunload",this.fieldChangedHandler,10,1),this.$btnEditAll.on("click",function(){return i.fieldsEditAll()}),this.$btnSaveAll.on("click",function(){return i.fieldsSaveAll()})}return function(e,t,i){t&&n(e.prototype,t),i&&n(e,i)}(t,[{key:"fieldInit",value:function(e){var t=this;(0,a.default)(e).on("click",".ps-js-btn-edit",function(){return t.fieldEdit(e)}).on("click",".ps-js-btn-cancel",function(){return t.fieldEditCancel(e)}).on("click",".ps-js-btn-save",function(){return t.fieldEditSave(e)})}},{key:"fieldGetData",value:function(e){var t,i=(0,a.default)(e).closest(".ps-js-profile-item");if(i.length&&!(t=i.data()).$field){var n=i.find(".ps-list-info-content-form"),l=n.find("input[type=text],input[type=checkbox],input[type=radio],textarea,select");t={$field:i,$label:i.find(".ps-list-info-content-text"),$form:i.find(".ps-list-info-content-form"),$error:i.find(".ps-list-info-content-error"),$validation:i.find(".ps-js-validation"),$inputs:l,$btnEdit:i.find(".ps-js-btn-edit"),$btnCancel:n.find(".ps-js-btn-cancel"),$btnSave:n.find(".ps-js-btn-save"),id:l.data("id"),type:this.fieldGetType(l),value:this.fieldGetValue(l)},i.data(t)}return t}},{key:"fieldGetType",value:function(e){var t=e.eq(0),i=t.prop("tagName").toLowerCase(),n=t.attr("type")||"";return-1<["select","textarea"].indexOf(i)?n=i:"text"===n&&t.hasClass("datepicker")&&(n="datepicker"),n}},{key:"fieldGetValue",value:function(e){var t,i,n=this.fieldGetType(e);return t="checkbox"===n?(t=e.filter(":checked").map(function(e,t){return t.value}),JSON.stringify(l(t))):"radio"===n?e.filter(":checked").val():"datepicker"===n?(i=e.val(),{value:t=e.data("value"),formatted:i}):e.val()}},{key:"fieldSetValue",value:function(e,i){var t=this.fieldGetType(e);"checkbox"===t?(i=JSON.parse(i),e.each(function(e,t){t.checked=-1<i.indexOf(t.value)})):"radio"===t?e.each(function(e,t){t.checked=t.value===i}):"datepicker"===t?(e.val(i.formatted),e.data("value",i.value)):e.val(i)}},{key:"fieldEdit",value:function(e,t){var i=this,n=1<arguments.length&&void 0!==t&&t,l=this.fieldGetData(e),a=l.$label,r=l.$form,o=l.$error,d=l.$validation,f=l.$inputs,s=l.id,u=l.type;"text"===u&&f.off("keydown").on("keydown",function(e){13===e.keyCode&&(e.preventDefault(),e.stopPropagation(),i.fieldEditSave(e.target))});var c=function(){};if(-1<["text","textarea"].indexOf(u)){var p=f.next(".ps-js-counter");p.length&&(p.show(),(c=h.default.throttle(function(e){return p.html(e)},500))(f.val().length))}f.off("input.ps-field").on("input.ps-field",function(e){-1===i.fieldChanged.indexOf(s)&&i.fieldChanged.push(s),c(e.target.value.length)}),a.hide(),r.show(),o.hide(),d.removeClass("ps-alert-danger"),n||-1===["checkbox","radio"].indexOf(u)&&f.focus()}},{key:"fieldEditCancel",value:function(e){var t=this.fieldGetData(e),i=t.$label,n=t.$form,l=t.$error,a=t.$inputs,r=t.id,o=t.value;this.fieldSetValue(a,o),i.show(),n.hide(),l.hide();var d=this.fieldChanged.indexOf(r);-1<d&&this.fieldChanged.splice(d,1)}},{key:"fieldEditSave",value:function(e){var l=this,a=this.fieldGetData(e),r=a.$field,o=a.$label,d=a.$form,f=a.$error,s=a.$inputs,n=a.$btnCancel,u=a.$btnSave,c=a.id,p=a.type,h=u.find("img"),v=this.fieldGetValue(s);s.attr("disabled","disabled"),u.add(n).attr("disabled","disabled"),h.show(),"datepicker"===p&&(v=v.value),v=y.observer.applyFilters("profile_field_save",v,s);function b(e){var t=e.display_value,i=o.find(".ps-list-info-content-data");a.value=v,void 0!==t?(t=y.observer.applyFilters("peepso_parse_content",t),i.html(t)):"select"===p?i.html(s.find("option:selected").text()):i.html(s.val()),o.show(),d.hide(),f.hide(),r.addClass("ps-list-info-success"),setTimeout(function(){return r.removeClass("ps-list-info-success")},1e3),y.observer.doAction("profile_field_updated",a,e);var n=l.fieldChanged.indexOf(c);-1<n&&l.fieldChanged.splice(n,1)}return new y.Promise(function(e,t){var i=!1;y.modules.user.updateField($.userid,c,v).then(b).catch(function(e){!function(e){var t=[];if(a.$validation.removeClass("ps-alert-danger"),e)for(var i in e){var n=d.find(".ps-js-validation-"+i);n.length?n.addClass("ps-alert-danger"):t.push(e[i])}t.length?(t=t.join("<br>"),f.html(t).show()):f.hide(),r.addClass("ps-list-info-error"),setTimeout(function(){return r.removeClass("ps-list-info-error")},1e3)}(e),i=!0}).then(function(){s.removeAttr("disabled"),u.add(n).removeAttr("disabled"),h.hide(),i?t(r[0]):e()})})}},{key:"fieldsEditAll",value:function(){var i=this;this.$btnEditAll.hide(),this.$btnSaveAll.show(),this.$fields.each(function(e,t){i.fieldEdit(t,"nofocus")})}},{key:"fieldsSaveAll",value:function(){var l=this;this.$btnSaveAll.attr("disabled","disabled");var i=[];this.$fields.each(function(e,t){i.push(l.fieldEditSave(t))}),y.Promise.all(i.map(function(e){return e.catch(function(e){return e})})).then(function(e){var t=e.filter(function(e){return e});if(l.$btnSaveAll.removeAttr("disabled"),t.length){var i=(0,a.default)(t[0]).offset().top-window.innerHeight/2,n=h.default.debounce(function(){return alert(r)},200);(0,a.default)("html, body").animate({scrollTop:i},1e3,n)}else l.$btnSaveAll.hide(),l.$btnEditAll.show()})}}]),t}(),o={init:function(){var e=document.querySelectorAll('[data-ps-section="profile/about"]');e.length&&l(e).forEach(function(e){return new i(e)})}};d.default=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n,l=(n=e("./about"))&&n.__esModule?n:{default:n};var a={init:function(){l.default.init()}};i.default=a},{"./about":2}]},{},[1]);