!function r(s,a,d){function p(t,e){if(!a[t]){if(!s[t]){var o="function"==typeof require&&require;if(!e&&o)return o(t,!0);if(u)return u(t,!0);var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}var n=a[t]={exports:{}};s[t][0].call(n.exports,function(e){return p(s[t][1][e]||e)},n,n.exports,r,s,a,d)}return a[t].exports}for(var u="function"==typeof require&&require,e=0;e<d.length;e++)p(d[e]);return p}({1:[function(e,t,o){(function(e){"use strict";var t,s=(t="undefined"!=typeof window?window.jQuery:void 0!==e?e.jQuery:null)&&t.__esModule?t:{default:t};(0,s.default)(function(){var e=(0,s.default)("input[name=verify_password]");if(e.length){var t="ps-input-readonly",o=e.closest("form"),i=o.find("input[type=text], input[type=password]").not(e),n=o.find("[type=submit]");i.each(function(){(0,s.default)(this).data("ps-value",this.value)}),i.filter("input[name=user_nicename]").on("input",function(){var e=this.value.replace(/[^a-z0-9-_\.@]/gi,"");this.value!==e&&(this.value=e)}),e.on("input",r),i.on("input",r),r()}function r(){e.val().trim().length<5?(i.attr("readonly","readonly").addClass(t),n.attr("disabled","disabled").addClass(t)):(i.removeAttr("readonly").removeClass(t),!function(){var e=!1;return i.each(function(){if(this.value!==(0,s.default)(this).data("ps-value"))return!(e=!0)}),e}()?n.attr("disabled","disabled").addClass(t):n.removeAttr("disabled").removeClass(t))}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,o){"use strict";e("./notifications"),e("./account")},{"./account":1,"./notifications":3}],3:[function(n,e,t){(function(e){"use strict";var s=o("undefined"!=typeof window?window.jQuery:void 0!==e?e.jQuery:null),t=o(n("promise/lib/es6-extensions")),a="undefined"!=typeof window?window.peepsodata:void 0!==e?e.peepsodata:null;function o(e){return e&&e.__esModule?e:{default:e}}function d(o,i,e){var n=2<arguments.length&&void 0!==e&&e;return new t.default(function(e){var t=[o,i,e,n];n?u.unshift(t):u.push(t),setTimeout(r,500)})}function p(e){var t=!(0<arguments.length&&void 0!==e)||e,o=(0,s.default)(".ps-js-preferences-header"),i=(0,s.default)(".ps-preferences-notifications__menu-item").filter("[data-type=email]"),n=(0,s.default)(".ps-preferences__checkbox").children("[data-type=email]");t?(o.parent(".ps-form-controls").show(),i.show(),n.show()):(o.parent(".ps-form-controls").hide(),i.hide(),n.hide())}function i(e){var t=(0,s.default)(e),o=t.closest(".ps-preferences__checkbox").find("[type=checkbox]").not(t);if(o.length&&o[0].checked!==t[0].checked){var i=t.closest("span[data-type]").data("type");("onsite"===i&&!t[0].checked||"email"===i&&t[0].checked)&&o.trigger("click")}}var u=[],l=!1,r=function e(){if(u.length&&!l){var t=u.shift(),o=t[0],i=t[1],n=[t[2]],r=t[3],s={user_id:a.currentuserid,view_user_id:a.userid,fieldname:o,value:i};!r&&u.length&&(t=u.shift(),s.fieldname_extra=t[0],s.value_extra=t[1],n.push(t[2])),l=!0,peepso.postJson("profilepreferencesajax.save_notifications",s,function(t){l=!1,n.forEach(function(e){return e(t)}),e()})}};(0,s.default)(function(){(0,s.default)(".ps-js-profile-list").on("change","[type=checkbox]",function(){var e=(0,s.default)(this).closest(".ps-form-controls").find(".ps-js-loading"),t=e.find("img"),o=e.find("i");o.stop().hide(),t.show(),d((0,s.default)(this).attr("name"),this.checked?1:0).then(function(){t.hide(),o.show().delay(800).fadeOut()}),i(this)});var t=(0,s.default)("select[name=email_intensity]");t.off("change.savepref"),t.on("change",function(){var i=this.value,e=t.next(".ps-js-loading"),n=e.find("img"),r=e.find("i");r.stop().hide(),n.show(),d("email_intensity",i,!0).then(function(e){if(n.hide(),r.show().delay(800).fadeOut(),e.success){var t=(0,s.default)("#peepso_email_intensity_descriptions").children(),o=t.filter("#peepso_email_intensity_"+i);o.length&&(t.not(o).hide(),o.show()),p(0==+i)}})}),t.length&&p(0==+t.val()),(0,s.default)(".ps-preferences__checkbox").children("[data-type=onsite]").find("[type=checkbox]").each(function(){i(this)})})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"promise/lib/es6-extensions":9}],4:[function(e,t,o){"use strict";e("./profile"),e("./about"),e("./profile-extended")},{"./about":2,"./profile":6,"./profile-extended":5}],5:[function(e,t,o){"use strict";jQuery(function(o){var i=".ps-js-profile-separator",e=o(".ps-js-profile-list");e.length&&e.find(i).closest(".ps-js-profile-item").each(function(){var e=o(this),t=e.next();return t.length?t.find(i).length?(e.remove(),!0):void 0:(e.remove(),!0)})})},{}],6:[function(e,t,o){"use strict";function i(){this.cover={},this.cover.x_position_percent=0,this.cover.y_position_percent=0,this.$cover_ct=jQuery(".js-focus-cover"),this.$cover_image=jQuery("img#"+peepsodata.userid),this.initial_cover_position=this.$cover_image.attr("style"),this.avatar_use_gravatar=!1}var n=window.profile=new i;i.prototype.init=function(){var e=jQuery(".js-collapse-about-btn");0!==e.length&&e.on("click",function(e){e.preventDefault();var t=jQuery(".js-collapse-about");"none"===t.css("display")?t.show():t.hide()}),jQuery(".js-focus-cover").hover(function(){!1===pswindow.is_visible&&jQuery(".js-focus-change-cover").show()},function(){jQuery(".js-focus-change-cover").hide()}),jQuery(".ps-tab__bar").unbind("click");var t=this;this.$cover_image.one("load",function(){t.fix_horizontal_padding()}).each(function(){this.complete&&jQuery(this).load()}),jQuery(window).on("resize.focus-image",jQuery.proxy(this.fix_horizontal_padding_debounced,this));var o=jQuery(".ps-page--preferences");o.length&&(o.find("input[type=checkbox]").on("click.savepref",n.save_preference),o.find("select").on("change.savepref",n.save_preference),o.find(".ps-js-dropdown input[type=hidden]").on("change",n.save_preference),o.find(".ps-preferences__checkbox").find("input[type=checkbox]").off("click.savepref"));var i=jQuery(".ps-js-profile-item");i.length&&i.each(function(){var e=jQuery(this);if(e.find(".peepso-markdown").length){var t=peepso.observer.applyFilters("peepso_parse_content",e.html());e.html(t)}})},i.prototype.activate_tab=function(e,t,o){return e.preventDefault(),jQuery(e.target).addClass("active").siblings("[data-toggle=tab]").removeClass("active"),jQuery(o).hide(),jQuery(t).show(),!1},i.prototype.new_like=function(){return peepso.postJson("profile.like",{user_id:peepsodata.userid},function(e){var t,o,i;e.success?(o=(t=e.data||{}).html,i=t.like_count,jQuery(".profile-social.profile-interactions").html(o),void 0!==i&&peepso.observer.doAction("profile_update_like",peepsodata.userid,i)):psmessage.show("",e.errors[0]).fade_out(psmessage.fade_time)}),!1},i.prototype.unblock_user=function(t,e){if(!this.unblocking_user){e&&(e=jQuery(e)).find("img").css("display","inline");var o={uid:peepsodata.currentuserid,user_id:t};this.unblocking_user=!0,peepso.postJson("activity.unblockuser",o,jQuery.proxy(function(e){this.unblocking_user=!1,e.success&&(jQuery(".ps-js-focus--"+t).find(".ps-focus-actions, .ps-focus-actions-mobile").html(e.data.actions),psmessage.show(e.data.header,e.data.message,psmessage.fade_time))},this))}},i.prototype.confirm_remove_cover_photo=function(){var e=jQuery("#delete-confirmation #delete-title").html(),t=jQuery("#delete-confirmation #delete-content").html();pswindow.show(e,t)},i.prototype.remove_cover_photo=function(e){var t={uid:peepsodata.currentuserid,user_id:e,_wpnonce:jQuery("#_covernonce").val()};peepso.postJson("profile.remove_cover_photo",t,function(e){e.success&&window.location.reload()})},i.prototype.reposition_cover=function(){jQuery(".js-focus-gradient",".js-focus-cover").hide(),jQuery(".js-focus-change-cover > a",".js-focus-cover").hide(),jQuery(".reposition-cover-actions",".js-focus-cover").show(),jQuery(".js-focus-cover").addClass("ps-focus-cover-edit");var s=this,o=jQuery(".js-focus-cover").height()-jQuery("img#"+peepsodata.userid).height(),i=jQuery(".js-focus-cover").width()-jQuery("img#"+peepsodata.userid).width();jQuery("img#"+peepsodata.userid).draggable({cursor:"move",drag:function(e,t){t.position.top<o&&(t.position.top=o),0<t.position.top&&(t.position.top=0),t.position.left<i&&(t.position.left=i),0<t.position.left&&(t.position.left=0)},stop:function(e,t){var o,i=jQuery("img#"+peepsodata.userid),n=i.closest(".js-focus-cover"),r=100*t.position.top/n.height();r=Math.round(1e4*r)/1e4,o=100*t.position.left/n.width(),o=Math.round(1e4*o)/1e4,s.cover.x_position_percent=r,s.cover.y_position_percent=o,i.css("top",r+"%"),i.css("left",o+"%")}})},i.prototype.cancel_reposition_cover=function(){jQuery(".js-focus-gradient",".js-focus-cover").show(),jQuery(".js-focus-change-cover > a",".js-focus-cover").show(),jQuery(".reposition-cover-actions",".js-focus-cover").hide(),jQuery(".js-focus-cover").removeClass("ps-focus-cover-edit"),jQuery("img#"+peepsodata.userid).attr("style",this.initial_cover_position),jQuery("img#"+peepsodata.userid).draggable("destroy")},i.prototype.save_reposition_cover=function(){var e={user_id:peepsodata.userid,x:this.cover.x_position_percent,y:this.cover.y_position_percent,_wpnonce:jQuery("#_photononce").val()},t=this;jQuery(".reposition-cover-actions",".js-focus-cover").hide(),jQuery(".ps-reposition-loading",".js-focus-cover").show(),jQuery(".js-focus-cover").removeClass("ps-focus-cover-edit"),peepso.postJson("profile.reposition_cover",e,function(e){jQuery(".ps-reposition-loading",".js-focus-cover").hide(),t.initial_cover_position=jQuery("img#"+peepsodata.userid).attr("style"),t.cancel_reposition_cover()})},i.prototype.confirm_remove_avatar=function(){var e=jQuery("#delete-confirmation #delete-title").html(),t=jQuery("#delete-confirmation #delete-content").html();pswindow.show(e,t)},i.prototype.remove_avatar=function(e){var t={uid:peepsodata.currentuserid,user_id:e,_wpnonce:jQuery("#_photononce").val()};peepso.postJson("profile.remove_avatar",t,function(e){e.success&&window.location.reload()})},i.prototype.delete_profile=function(){var e=jQuery("#profile-delete-title").html(),t=jQuery("#profile-delete-content").html();pswindow.show(e,t)},i.prototype.delete_profile_action=function(){$req={};var e={uid:peepsodata.currentuserid};peepso.postJson("profile.delete_profile",e,function(e){e.success?window.location=e.data.url:psmessage.show("",e.errors[0]).fade_out(psmessage.fade_time)})},i.prototype.show_avatar_dialog=function(){jQuery(".ps-js-error").html("");var e=jQuery("#dialog-upload-avatar"),t=e.find("#dialog-upload-avatar-title").html(),o=e.find("#dialog-upload-avatar-content").html(),i=e.find(".dialog-action").html(),n=pswindow.show(t,o).set_actions(i).$container.find(".ps-dialog");n.addClass("ps-dialog-wide"),peepso.observer.addFilter("pswindow_close",function(){n.removeClass("ps-dialog-wide")},10,1),this.init_avatar_fileupload(),jQuery("#ps-window").on("pswindow.hidden",function(){jQuery(".upload-avatar .fileupload:visible").psFileupload("destroy")})},i.prototype.init_avatar_fileupload=function(){var s=this;jQuery(".upload-avatar .fileupload:visible").psFileupload({formData:{user_id:peepsodata.userid,_wpnonce:jQuery("#_photononce").val()},dataType:"json",url:peepsodata.ajaxurl_legacy+"profile.upload_avatar?avatar",add:function(e,t){if(t.files[0].type.length&&!/(\.|\/)(jpe?g|png)$/i.test(t.files[0].type)){var o=jQuery("#profile-avatar-error-filetype").text();jQuery(".ps-js-error").html(o)}else if(parseInt(t.files[0].size)>peepsodata.upload_size){var i=jQuery("#profile-avatar-error-filesize").text();jQuery(".ps-js-error").html(i)}else jQuery("#ps-window .ps-loading-image").show(),jQuery("#ps-window .show-avatar, #ps-window .show-thumbnail, #ps-window .upload-avatar").hide(),jQuery(".ps-js-error").hide(),pswindow.refresh(),t.submit()},done:function(e,t){var o=t.result;if(o.success){var i=jQuery("#dialog-upload-avatar-content",jQuery(o.data.html)),n=jQuery("#dialog-upload-avatar .dialog-action").html(),r="?"+Math.random();jQuery(".js-focus-avatar img",i).attr("src",o.data.image_url+r),jQuery(".imagePreview img",i).attr("src",o.data.orig_image_url+r),jQuery(".imagePreview",i).after('<input type="hidden" name="is_tmp" value="1"/>'),jQuery(".ps-js-has-avatar",i).show(),jQuery(".ps-js-no-avatar",i).hide(),pswindow.set_content(i),pswindow.set_actions(n),jQuery("#imagePreview img").one("load",function(){pswindow.refresh()}),s.init_avatar_fileupload(),jQuery("#ps-window button[name=rep_submit]").removeAttr("disabled").addClass("ps-btn-primary"),s.invalid_avatar_upload=!1,s.avatar_use_gravatar=!1}else jQuery("#ps-window .show-avatar, #ps-window .show-thumbnail, #ps-window .upload-avatar").show(),jQuery(".ps-js-error").html(o.errors).show(),jQuery("#ps-window .ps-loading-image").hide(),jQuery("#ps-window button[name=rep_submit]").attr("disabled","disabled").removeClass("ps-btn-primary"),s.invalid_avatar_upload=!0}})},i.prototype.confirm_avatar=function(t){var o,e;this.invalid_avatar_upload||(o=this.confirm_avatar)._loading||(o._loading=!0,t&&(t=jQuery(t)).attr("disabled","disabled"),e={user_id:peepsodata.userid,use_gravatar:this.avatar_use_gravatar?1:0,_wpnonce:jQuery("#_photononce").val()},peepso.postJson("profile.confirm_avatar",e,function(e){e&&e.success?window.location.reload():(o._loading=!1,t&&t.removeAttr("disabled"))}))},i.prototype.show_cover_dialog=function(){jQuery(".ps-js-error").html("");var e=jQuery("#dialog-upload-cover"),t=e.find("#dialog-upload-cover-title").html(),o=e.find("#dialog-upload-cover-content").html();pswindow.show(t,o),this.init_cover_fileupload(),jQuery("#ps-window").on("pswindow.hidden",function(){jQuery(".upload-cover .fileupload:visible").psFileupload("destroy")})},i.prototype.init_cover_fileupload=function(){var n=this;jQuery(".upload-cover .fileupload:visible").psFileupload({formData:{user_id:peepsodata.userid,_wpnonce:jQuery("#_photononce").val()},dataType:"json",url:peepsodata.ajaxurl_legacy+"profile.upload_cover?cover",add:function(e,t){if(t.files[0].type.length&&!/(\.|\/)(jpe?g|png)$/i.test(t.files[0].type)){var o=jQuery("#profile-cover-error-filetype").text();jQuery(".ps-js-error").html(o)}else if(parseInt(t.files[0].size)>peepsodata.upload_size){var i=jQuery("#profile-cover-error-filesize").text();jQuery(".ps-js-error").html(i)}else jQuery("#ps-window .ps-loading-image").show(),jQuery("#ps-window .upload-cover").hide(),t.submit()},done:function(e,t){var o,i=t.result;jQuery("#ps-window .ps-loading-image").hide(),jQuery("#ps-window .upload-cover").show(),i.success?(o=i.data.image_url+"?"+Math.random(),jQuery(".cover-image").attr("src",o).css("top","0").css("left","0").removeClass("default").addClass("has-cover"),jQuery(".ps-focus-image-mobile").attr("style","background:url("+o+") no-repeat center center;"),peepso.observer.doAction("profile_cover_update",peepsodata.userid,o),pswindow.fade_out("slow"),jQuery("#profile-reposition-cover").show(),jQuery("#dialog-upload-cover-content").html(i.data.html),pswindow.set_content(jQuery("#dialog-upload-cover-content",i.data.html).html()),n.fix_horizontal_padding_debounced(),n.init_cover_fileupload()):jQuery(".ps-js-error").html(i.errors)}})},i.prototype.fix_horizontal_padding=function(){var e;this.$cover_image.css({height:"auto",width:"100%",minWidth:"100%",maxWidth:"100%"}),e=.375*this.$cover_ct.width(),e=Math.max(e,this.$cover_ct.height()),this.$cover_image.height()<e&&this.$cover_image.css({height:e,width:"auto",minWidth:"100%",maxWidth:"none"}),this.initial_cover_position=this.$cover_image.attr("style")},i.prototype.fix_horizontal_padding_debounced=_.debounce(function(){this.fix_horizontal_padding()},300),i.prototype.edit_field=function(e){var t,o,i=jQuery(e).closest(".ps-list-info-content"),n=i.find("input[type=text],input[type=checkbox],input[type=radio],textarea,select").eq(0),r=(n.attr("type")||"").toLowerCase();return i.find(".ps-list-info-content-text").hide(),i.find(".ps-list-info-content-form").show(),i.find(".ps-list-info-content-error").hide(),i.find(".ps-js-validation").removeClass("ps-alert-danger"),"checkbox"===r?(t=(n=i.find("input[type=checkbox]:checked")).map(function(){return this.value}),t=jQuery.makeArray(t).join(","),i.data("original-value",t)):"radio"===r?(n=i.find("input[type=radio]:checked"),i.data("original-value",n.val())):(n.hasClass("datepicker")?(i.data("original-value",n.data("value")),i.data("original-formatted",n.val())):"text"===r||"TEXTAREA"===n.prop("tagName")?(i.data("original-value",n.val()),(o=n.next(".ps-js-counter")).length&&(o.show(),n.off("input").on("input",_.throttle(function(e){o.html(e.target.value.length)},500)).triggerHandler("input"))):i.data("original-value",n.val()),n.focus()),!1},i.prototype.cancel_field=function(e){var t,o,i=jQuery(e).closest(".ps-list-info-content"),n=i.find("input[type=text],input[type=checkbox],input[type=radio],textarea,select").eq(0),r=(n.attr("type")||"").toLowerCase(),s=n.data("id");return i.find(".ps-list-info-content-form").hide(),i.find(".ps-list-info-content-text").show(),i.find(".ps-list-info-content-error").hide(),"checkbox"===r?(t=i.data("original-value").split(","),(n=i.find("input[type=checkbox]")).each(function(){this.checked=-1<t.indexOf(this.value)})):"radio"===r?(t=i.data("original-value"),(n=i.find("input[type=radio]")).each(function(){this.checked=this.value===t})):n.hasClass("datepicker")?(n.data("value",i.data("original-value")),n.val(i.data("original-formatted"))):n.val(i.data("original-value")),this.field_changed_list&&this.field_changed_list.length&&-1<(o=this.field_changed_list.indexOf(s))&&this.field_changed_list.splice(o,1),!1},i.prototype.save_field=function(e){var t,o,d,p=jQuery(e),u=p.closest(".ps-list-info-content").closest(".ps-js-profile-item"),l=u.find("input[type=text],input[type=checkbox],input[type=radio],textarea,select"),c=u.find("button"),f=u.find(".ps-list-info-content-data"),i=(l.attr("type")||"").toLowerCase(),h=l.data("id");t="checkbox"===i?(t=l.filter(":checked").map(function(){return this.value}),t=jQuery.makeArray(t),JSON.stringify(t)):"radio"===i?l.filter(":checked").val():l.hasClass("datepicker")?l.data("value"):peepso.observer.applyFilters("profile_field_save",l.val(),l),o={user_id:peepsodata.currentuserid,view_user_id:peepsodata.userid,id:h,value:t},this.save_field_saving=!0,this.change_beforeunload(),l.attr("disabled","disabled"),c.attr("disabled","disabled"),p.find("img").show();var v=this;return peepso.postJson("profilefieldsajax.savefield",o,function(e){var t,o=0;if(p.find("img").hide(),l.removeAttr("disabled"),c.removeAttr("disabled"),v.save_field_saving=!1,e.success){if(t=e.data||{},u.find(".ps-list-info-content-form").hide(),u.find(".ps-list-info-content-text").show(),u.find(".ps-list-info-content-error").hide(),null!=t.display_value){var i=peepso.observer.applyFilters("peepso_parse_content",t.display_value);f.html(i)}else"select"===l.prop("tagName").toLowerCase()?f.html(l.find("option:selected").text()):f.html(l.val());void 0!==t.profile_completeness&&(100<=+t.profile_completeness?(o++,jQuery(".ps-completeness-status").hide(),jQuery(".ps-completeness-bar").hide()):(jQuery(".ps-completeness-status").html(t.profile_completeness_message).show(),jQuery(".ps-completeness-bar").show().children("span").css({width:+t.profile_completeness+"%"}))),void 0!==t.missing_required&&(+t.missing_required<=0?(o++,jQuery(".ps-missing-required-message").hide()):jQuery(".ps-missing-required-message").html(t.missing_required_message).show()),2<=o?jQuery(".ps-completeness-info").hide():jQuery(".ps-completeness-info").show(),v.field_changed_list&&v.field_changed_list.length&&-1<(d=v.field_changed_list.indexOf(h))&&v.field_changed_list.splice(d,1),u.addClass("ps-list-info-success"),setTimeout(function(){u.removeClass("ps-list-info-success")},1e3),peepso.observer.doAction("profile_field_updated")}else{var n,r,s=u.find(".ps-list-info-content-form"),a=[];if(s.find(".ps-js-validation").removeClass("ps-alert-danger"),e.errors[0])for(n in e.errors[0])(r=s.find(".ps-js-validation-"+n)).length?r.addClass("ps-alert-danger"):a.push(e.errors[0][n]);r=s.find(".ps-list-info-content-error").hide(),a.length&&(a=a.join("<br>"),r.html(a).show()),u.addClass("ps-list-info-error"),setTimeout(function(){u.removeClass("ps-list-info-error")},1e3)}}),!1},i.prototype.field_keydown=function(e,t){return 13!==t.keyCode||(setTimeout(function(){jQuery(e).closest(".ps-list-info-content").find(".ps-js-btn-save").trigger("click")},1),!1)},i.prototype.field_changed=function(e,t){var o=jQuery(e).data("id");return this.field_changed_list||(this.field_changed_list=[]),-1===this.field_changed_list.indexOf(o)&&this.field_changed_list.push(o),this.change_beforeunload(),!0},i.prototype.change_beforeunload=function(){if(!this.onbeforeunload_changed){var e=this;this.onbeforeunload_changed=window.onbeforeunload||function(){},window.onbeforeunload=function(){return e.save_field_saving?peepsodata.profile_saving_notice||"The system is currently saving your changes.":e.field_changed_list.length?peepsodata.profile_unsaved_notice||"There are unsaved changes on this page.":void 0}}},i.prototype.change_privacy=function(e){var t=jQuery(e),o=t.closest(".ps-js-dropdown"),i=o.find(".ps-js-dropdown-toggle"),n=o.find("input[type=hidden]"),r={},s="[class*=ps-icon-]",a=".ps-privacy-title",d=n.data("id"),p=(n.val(),i.find(s).attr("class")),u=i.find(a).html(),l=t.data("optionValue"),c=t.find(s).attr("class"),f=t.find("span").html();t.parent().children("[data-option-value]").each(function(){var e=jQuery(this),t=e.data("optionValue"),o=e.find(s).attr("class");r[t]=o}),i.find(s).attr("class",c),i.find(a).html(f),peepso.postJson("profilefieldsajax.save_acc",{user_id:peepsodata.currentuserid,view_user_id:peepsodata.userid,id:d,acc:l},function(e){e.success?n.val(l):(i.find(s).attr("class",p),i.find(a).html(u))})},i.prototype.use_gravatar=function(){var n=this;peepso.postJson("profile.use_gravatar",{},function(e){if(e.success){var t=jQuery("#dialog-upload-avatar-content",jQuery(e.data.html)),o=jQuery("#dialog-upload-avatar .dialog-action").html(),i=(Math.random(),e.data.image_url);i=i+(0<=i.indexOf("?")?"&rand=":"?rand=")+Math.random(),jQuery(".js-focus-avatar img",t).attr("src",i),jQuery(".imagePreview img",t).attr("src",i),jQuery(".imagePreview",t).after('<input type="hidden" name="is_tmp" value="1"/>'),jQuery(".ps-js-has-avatar",t).show(),jQuery(".ps-js-no-avatar",t).hide(),jQuery(".ps-js-crop-avatar",t).hide(),pswindow.set_content(t),pswindow.set_actions(o),jQuery("#imagePreview img").one("load",function(){pswindow.refresh()}),n.init_avatar_fileupload(),jQuery("#ps-window button[name=rep_submit]").removeAttr("disabled").addClass("ps-btn-primary"),n.invalid_avatar_upload=!1,n.avatar_use_gravatar=!0}})},i.prototype.save_preference=function(e){var t=jQuery(e&&e.target?e.target:e),o=t.closest(".ps-form-controls").find(".ps-js-loading"),i={};i.user_id=peepsodata.currentuserid,i.view_user_id=peepsodata.userid,i.meta_key=t.attr("name"),i.value=t.is(":checkbox")?t[0].checked?1:0:t.val(),o.find("i").stop().hide(),o.find("img").show(),peepso.postJson("profilepreferencesajax.savepreference",i,function(e){o.find("img").hide(),o.find("i").show().delay(800).fadeOut()})},i.prototype.save_notification=function(e){var t=jQuery(e&&e.target?e.target:e),o=t.closest(".ps-form-controls").find(".ps-js-loading"),i={};i.user_id=peepsodata.currentuserid,i.view_user_id=peepsodata.userid,i.fieldname=t.attr("name"),i.value=t.is(":checkbox")?t[0].checked?1:0:t.val(),o.find("i").stop().hide(),o.find("img").show(),peepso.postJson("profilepreferencesajax.save_notifications",i,function(e){o.find("img").hide(),o.find("i").show().delay(800).fadeOut(),e.success})},i.prototype.profile_deletion=function(){var e="ps-js-dialog-profile-deletion",i=jQuery("#"+e);this.deleting_profile||(i.length||((i=jQuery(peepsoprofiledata.profile_deletion_popup_content)).attr("id",e),i.appendTo(document.body),i.on("click",".ps-js-cancel",function(e){e.preventDefault(),e.stopPropagation(),i.hide()}),i.on("click",".ps-js-submit",jQuery.proxy(function(e){var t=jQuery(e.currentTarget).find("img").show(),o={password:i.find("input[type=password]").val()};this.deleting_profile=!0,peepso.postJson("profile.delete_profile",o,jQuery.proxy(function(e){this.deleting_profile=!1,t.hide(),e.success?(i.find(".ps-js-error").hide(),e.data&&(psmessage.show("",e.data.messages),setTimeout(function(){window.location=e.data.url},2e3))):e.errors&&i.find(".ps-js-error").html(e.errors[0]).show()},this))},this))),i.find("input[type=password]").val(""),i.find(".ps-js-error").hide(),i.show())},i.prototype.request_account_data=function(){console.log("this");var e="ps-js-dialog-profile-request-account-data",i=jQuery("#"+e);this.requesting_data||(i.length||((i=jQuery(peepsoprofiledata.profile_account_data_popup_content)).attr("id",e),i.appendTo(document.body),i.on("click",".ps-js-cancel",function(e){e.preventDefault(),e.stopPropagation(),i.hide()}),i.on("click",".ps-js-submit",jQuery.proxy(function(e){var t=jQuery(e.currentTarget).find("img").show(),o={password:i.find("input[type=password]").val()};this.requesting_data=!0,peepso.postJson("profile.request_account_data",o,jQuery.proxy(function(e){this.requesting_data=!1,t.hide(),e.success?(i.find(".ps-js-error").hide(),e.data&&(psmessage.show("",e.data.messages),setTimeout(function(){window.location=e.data.url},2e3))):e.errors&&i.find(".ps-js-error").html(e.errors[0]).show()},this))},this))),i.find("input[type=password]").val(""),i.find(".ps-js-error").hide(),i.show())},i.prototype.download_account_data=function(){var e="ps-js-dialog-profile-download-account-data",i=jQuery("#"+e);this.requesting_data||(i.length||((i=jQuery(peepsoprofiledata.profile_download_account_data_popup_content)).attr("id",e),i.appendTo(document.body),i.on("click",".ps-js-cancel",function(e){e.preventDefault(),e.stopPropagation(),i.hide()}),i.on("click",".ps-js-submit",jQuery.proxy(function(e){var t=jQuery(e.currentTarget).find("img").show(),o={password:i.find("input[type=password]").val()};this.requesting_data=!0,peepso.postJson("profile.download_account_data",o,jQuery.proxy(function(e){this.requesting_data=!1,t.hide(),e.success?(i.find(".ps-js-error").hide(),e.data&&(psmessage.show("",e.data.messages),setTimeout(function(){window.location=e.data.url},2e3))):e.errors&&i.find(".ps-js-error").html(e.errors[0]).show()},this))},this))),i.find("input[type=password]").val(""),i.find(".ps-js-error").hide(),i.show())},i.prototype.delete_account_data_archive=function(){var e="ps-js-dialog-profile-delete-account-data-archive",i=jQuery("#"+e);this.delete_account_data||(i.length||((i=jQuery(peepsoprofiledata.profile_delete_account_data_archive_popup_content)).attr("id",e),i.appendTo(document.body),i.on("click",".ps-js-cancel",function(e){e.preventDefault(),e.stopPropagation(),i.hide()}),i.on("click",".ps-js-submit",jQuery.proxy(function(e){var t=jQuery(e.currentTarget).find("img").show(),o={password:i.find("input[type=password]").val()};this.delete_account_data=!0,peepso.postJson("profile.delete_account_data_archive",o,jQuery.proxy(function(e){this.delete_account_data=!1,t.hide(),e.success?(i.find(".ps-js-error").hide(),e.data&&(psmessage.show("",e.data.messages),setTimeout(function(){window.location=e.data.url},2e3))):e.errors&&i.find(".ps-js-error").html(e.errors[0]).show()},this))},this))),i.find("input[type=password]").val(""),i.find(".ps-js-error").hide(),i.show())},jQuery(function(){n.init()})},{}],7:[function(e,c,t){(function(e){"use strict";function t(e){i.length||(o(),!0),i[i.length]=e}c.exports=t;var o,i=[],n=0;function r(){for(;n<i.length;){var e=n;if(n+=1,i[e].call(),1024<n){for(var t=0,o=i.length-n;t<o;t++)i[t]=i[t+n];i.length-=n,n=0}}i.length=0,n=0,!1}var s,a,d,p=void 0!==e?e:self,u=p.MutationObserver||p.WebKitMutationObserver;function l(i){return function(){var e=setTimeout(o,0),t=setInterval(o,50);function o(){clearTimeout(e),clearInterval(t),i()}}}o="function"==typeof u?(s=1,a=new u(r),d=document.createTextNode(""),a.observe(d,{characterData:!0}),function(){s=-s,d.data=s}):l(r),t.requestFlush=o,t.makeRequestCallFromTimer=l}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(e,t,o){"use strict";var n=e("asap/raw");function s(){}var r=null,a={};function d(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("Promise constructor's argument is not a function");this._h=0,this._i=0,this._j=null,this._k=null,e!==s&&f(e,this)}function p(e,t){for(;3===e._i;)e=e._j;if(d._l&&d._l(e),0===e._i)return 0===e._h?(e._h=1,void(e._k=t)):1===e._h?(e._h=2,void(e._k=[e._k,t])):void e._k.push(t);!function(o,i){n(function(){var e=1===o._i?i.onFulfilled:i.onRejected;if(null!==e){var t=function(e,t){try{return e(t)}catch(e){return r=e,a}}(e,o._j);t===a?l(i.promise,r):u(i.promise,t)}else 1===o._i?u(i.promise,o._j):l(i.promise,o._j)})}(e,t)}function u(e,t){if(t===e)return l(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"==typeof t||"function"==typeof t)){var o=function(e){try{return e.then}catch(e){return r=e,a}}(t);if(o===a)return l(e,r);if(o===e.then&&t instanceof d)return e._i=3,e._j=t,void i(e);if("function"==typeof o)return void f(o.bind(t),e)}e._i=1,e._j=t,i(e)}function l(e,t){e._i=2,e._j=t,d._m&&d._m(e,t),i(e)}function i(e){if(1===e._h&&(p(e,e._k),e._k=null),2===e._h){for(var t=0;t<e._k.length;t++)p(e,e._k[t]);e._k=null}}function c(e,t,o){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=o}function f(e,t){var o=!1,i=function(e,t,o){try{e(t,o)}catch(e){return r=e,a}}(e,function(e){o||(o=!0,u(t,e))},function(e){o||(o=!0,l(t,e))});o||i!==a||(o=!0,l(t,r))}(t.exports=d)._l=null,d._m=null,d._n=s,d.prototype.then=function(e,t){if(this.constructor!==d)return function(i,n,r){return new i.constructor(function(e,t){var o=new d(s);o.then(e,t),p(i,new c(n,r,o))})}(this,e,t);var o=new d(s);return p(this,new c(e,t,o)),o}},{"asap/raw":7}],9:[function(e,t,o){"use strict";var d=e("./core.js");t.exports=d;var i=u(!0),n=u(!1),r=u(null),s=u(void 0),a=u(0),p=u("");function u(e){var t=new d(d._n);return t._i=1,t._j=e,t}d.resolve=function(e){if(e instanceof d)return e;if(null===e)return r;if(void 0===e)return s;if(!0===e)return i;if(!1===e)return n;if(0===e)return a;if(""===e)return p;if("object"==typeof e||"function"==typeof e)try{var t=e.then;if("function"==typeof t)return new d(t.bind(e))}catch(o){return new d(function(e,t){t(o)})}return u(e)},d.all=function(e){var a=Array.prototype.slice.call(e);return new d(function(i,n){if(0===a.length)return i([]);var r=a.length;function s(t,e){if(e&&("object"==typeof e||"function"==typeof e)){if(e instanceof d&&e.then===d.prototype.then){for(;3===e._i;)e=e._j;return 1===e._i?s(t,e._j):(2===e._i&&n(e._j),void e.then(function(e){s(t,e)},n))}var o=e.then;if("function"==typeof o)return void new d(o.bind(e)).then(function(e){s(t,e)},n)}a[t]=e,0==--r&&i(a)}for(var e=0;e<a.length;e++)s(e,a[e])})},d.reject=function(o){return new d(function(e,t){t(o)})},d.race=function(e){return new d(function(t,o){e.forEach(function(e){d.resolve(e).then(t,o)})})},d.prototype.catch=function(e){return this.then(null,e)}},{"./core.js":8}]},{},[4]);