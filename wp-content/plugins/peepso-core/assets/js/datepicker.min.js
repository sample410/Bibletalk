!function(o){var t,e={},i={};window.peepsodatepickerdata&&peepsodatepickerdata.config&&(e=peepsodatepickerdata.config,t=_.map(e.daysShort,function(t){return t.replace(/^([a-z]{2}).+$/i,"$1")}),_.extend(i,{monthNames:e.months,monthNamesShort:e.monthsShort,dayNames:e.days,dayNamesShort:e.daysShort,dayNamesMin:t,currentText:e.today,dateFormat:e.format,isRTL:e.rtl,showButtonPanel:!0,currentText:e.today,closeText:e.apply,changeMonth:!0,changeYear:!0,yearRange:"-100:+0",firstDay:0})),_.extend(i,{beforeShow:function(t,e){var a=parseInt(o(t).zIndex()),i=['<div class="peepso-datepicker"',a?' style="position:relative; z-index: '+(a+1)+'"':""," />"].join("");e.dpDiv.wrap(i),setTimeout(function(){e.dpDiv.closest(".peepso-datepicker").on("click",function(t){t.stopPropagation()})},1)},beforeShowDay:function(){var t=o(this).data("datepicker");return a(t),[!0,""]},onClose:function(t,e){!function(t){p(t)}(e),_.delay(function(){e.dpDiv.unwrap(".peepso-datepicker")},500)}}),o.jQueryDatepicker=o.datepicker,o.fn.jQueryDatepicker=o.fn.datepicker,o.fn.psDatepicker=function(e){return this.each(function(){var a=o(this),t="click.psDatepicker";return a.next("button").off(t).on(t,function(t){var e=a.data("datepicker").dpDiv;t.preventDefault(),t.stopPropagation(),e.is(":visible")?a.jQueryDatepicker("hide"):a.jQueryDatepicker("show")}),e=_.extend({},i,e||{}),a.jQueryDatepicker(e)})};var a=_.debounce(function(t){var e,a=t.dpDiv;!function(t){var e=t.dpDiv,a=e.find(".ui-datepicker-prev"),i=e.find(".ui-datepicker-next"),n=e.find(".ui-datepicker-month"),r=e.find(".ui-datepicker-year"),d=e.find(".ui-datepicker-close");p(t),e.on("keydown.ps-datepicker",{inst:t},c),a.on("click.ps-datepicker",{inst:t},l),i.on("click.ps-datepicker",{inst:t},l),n.on("change.ps-datepicker",{inst:t},l).on("click.ps-datepicker",{inst:t},function(t){t.stopPropagation()}),r.on("change.ps-datepicker",{inst:t},l).on("click.ps-datepicker",{inst:t},function(t){t.stopPropagation()}),d.on("click.ps-datepicker",{inst:t},h)}(t),f(t),(e=a.find(".ui-state-highlight")[0])||(e=a.find(".ui-state-active")[0]||a.find(".ui-datepicker-today a")[0]||a.find(".ui-state-default")[0],o(e).addClass("ui-state-highlight")),e.focus()},100);function p(t){var e=t.dpDiv,a=e.find(".ui-datepicker-prev"),i=e.find(".ui-datepicker-next"),n=e.find(".ui-datepicker-month"),r=e.find(".ui-datepicker-year"),d=e.find(".ui-datepicker-close");e.off("keydown.ps-datepicker"),a.off("click.ps-datepicker"),i.off("click.ps-datepicker"),n.off("change.ps-datepicker").off("click.ps-datepicker"),r.off("change.ps-datepicker").off("click.ps-datepicker"),d.off("click.ps-datepicker")}function c(t){var e=t.data.inst,a=t.target,i=t.which,n=t.altKey;37===i?(t.preventDefault(),t.stopPropagation(),function(t,e){var a,i,n=o(e).closest("td");n.length&&((a=n.prev("td")).length||(a=n.closest("tr").prev("tr").find("td").last()));a&&a.length&&(i=a.find(".ui-state-default"));i&&i.length?u(t,i):r(t,e,1)}(e,a)):36===i?(t.preventDefault(),t.stopPropagation(),function(t,e){var a=o(e).closest("tr").find(".ui-state-default").first();a&&a.length&&u(t,a)}(e,a)):39===i?(t.preventDefault(),t.stopPropagation(),function(t,e){var a,i,n=o(e).closest("td");n.length&&((a=n.next("td")).length||(a=n.closest("tr").next("tr").find("td").first()));a&&a.length&&(i=a.find(".ui-state-default"));i&&i.length?u(t,i):d(t,e,1)}(e,a)):35===i?(t.preventDefault(),t.stopPropagation(),function(t,e){var a=o(e).closest("tr").find(".ui-state-default").last();a&&a.length&&u(t,a)}(e,a)):38===i?(t.preventDefault(),t.stopPropagation(),function(t,e){var a,i=o(e).closest("td"),n=i.closest("tr").prev("tr").find("td").eq(i.prevAll().length);n&&n.length&&(a=n.find(".ui-state-default"));a&&a.length?u(t,a):r(t,e,7)}(e,a)):40===i?(t.preventDefault(),t.stopPropagation(),function(t,e){var a,i=o(e).closest("td"),n=i.closest("tr").next("tr").find("td").eq(i.prevAll().length);n&&n.length&&(a=n.find(".ui-state-default"));a&&a.length?u(t,a):d(t,e,7)}(e,a)):33===i?(t.preventDefault(),t.stopPropagation(),n?function(e,t){var a=e.dpDiv,i=o(t).data("psDate"),n="#"+e.id.replace(/\\\\/g,"\\");o.jQueryDatepicker._adjustDate(n,12,"M"),_.defer(function(){var t;f(e),t=(t=a.find("a.ui-state-default")).filter("[data-ps-date="+i+"]"),u(e,t)})}(e,a):d(e,a)):34===i?(t.preventDefault(),t.stopPropagation(),n?function(e,t){var a=e.dpDiv,i=o(t).data("psDate"),n="#"+e.id.replace(/\\\\/g,"\\");o.jQueryDatepicker._adjustDate(n,-12,"M"),_.defer(function(){var t;f(e),t=(t=a.find("a.ui-state-default")).filter("[data-ps-date="+i+"]"),u(e,t)})}(e,a):r(e,a)):13===i?s(e,a):27===i&&function(t){t.input.jQueryDatepicker("hide")}(e)}function r(e,t,a){var i=e.dpDiv,n=o(t).data("psDate"),r="#"+e.id.replace(/\\\\/g,"\\");void 0===a?n=new Date(e.drawYear,e.drawMonth,+n):"number"==typeof a&&(n=new Date(e.drawYear,e.drawMonth,+n-a)),o.jQueryDatepicker._adjustDate(r,-1,"M"),_.defer(function(){var t;f(e),t=(t=i.find("a.ui-state-default")).filter("[data-ps-date="+n.getDate()+"]"),u(e,t)})}function d(e,t,a){var i=e.dpDiv,n=o(t).data("psDate"),r="#"+e.id.replace(/\\\\/g,"\\");void 0===a?n=new Date(e.drawYear,e.drawMonth,+n):"number"==typeof a&&(n=new Date(e.drawYear,e.drawMonth,+n+a)),o.jQueryDatepicker._adjustDate(r,1,"M"),_.defer(function(){var t;f(e),t=(t=i.find("a.ui-state-default")).filter("[data-ps-date="+n.getDate()+"]"),u(e,t)})}function s(t,e){o(e).click()}function f(t){var e=t.dpDiv.find(".ui-datepicker-calendar"),a=t.settings,n=a.dayNames,r=a.monthNames[t.drawMonth],d=t.drawYear;e.attr("role","application"),e.find("tbody a.ui-state-default").attr("role","button").each(function(){var t,e=o(this),a=e.closest("td").prevAll().length,i=o.trim(e.text());t=i+", "+n[a]+" "+r+" "+d,e.removeClass("ui-state-hover"),e.attr("aria-label",t),e.attr("data-ps-date",i)})}function n(t){return t.dpDiv.find(".ui-state-highlight")}function u(t,e){t.dpDiv;var a=n(t),i=o(e);_.defer(function(){a.removeClass("ui-state-highlight"),i.focus(),i.addClass("ui-state-highlight")})}function l(t){var e=t.data.inst,a=new Date(e.selectedYear,e.selectedMonth,e.selectedDay),i=e.input;t.stopPropagation(),_.delay(function(){i.jQueryDatepicker("setDate",a)},100)}function h(t){s(0,n(t.data.inst))}}(jQuery);