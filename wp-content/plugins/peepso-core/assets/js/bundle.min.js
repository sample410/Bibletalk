!function s(a,r,u){function c(e,t){if(!r[e]){if(!a[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(l)return l(e,!0);var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}var o=r[e]={exports:{}};a[e][0].call(o.exports,function(t){return c(a[e][1][t]||t)},o,o.exports,s,a,r,u)}return r[e].exports}for(var l="function"==typeof require&&require,t=0;t<u.length;t++)c(u[t]);return c}({1:[function(t,e,n){"use strict";var i,o;i=jQuery,o=_.debounce(function(t){t.style.height="",t.style.height=+t.scrollHeight+2+"px"},1),i.fn.ps_autosize=function(){return this.each(function(){o(this),i(this).off("input.ps-autosize").on("input.ps-autosize",function(){o(this)})})}},{}],2:[function(t,e,r){(function(t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var e,c=(e="undefined"!=typeof window?window.jQuery:void 0!==t?t.jQuery:null)&&e.__esModule?e:{default:e};function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var p=["January","February","March","April","May","June","July","August","September","October","November","December"],n=function(){function u(t,e,n){var i=this,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),l(this,"$year",void 0),l(this,"$month",void 0),l(this,"$date",void 0),l(this,"opts",void 0);var s=new Date,a=s.getFullYear(),r={monthNames:p,defaultDate:new Date(s.getTime()),minDate:new Date(a-80,0,1,1,0,0),maxDate:new Date(a+80,11,31,1,0,0),onSelect:function(){}};this.opts=c.default.extend(r,o),this.$year=(0,c.default)(t).on("change",function(t){return i.onChangeYear(t)}),this.$month=(0,c.default)(e).on("change",function(t){return i.onChangeMonth(t)}),this.$date=(0,c.default)(n).on("change",function(){return i.onChangeDate()}),this.populateYear(),this.populateMonth(+this.$year.val()),this.populateDate(+this.$year.val(),+this.$month.val())}return function(t,e,n){e&&i(t.prototype,e),n&&i(t,n)}(u,[{key:"getDate",value:function(){var t=new Date(+this.$year.val(),this.$month.val()-1,+this.$date.val());return s(t)}},{key:"setDate",value:function(t){"string"==typeof t&&(t=o(t));var e=t.getDate(),n=t.getMonth()+1,i=t.getFullYear();this.populateYear(i),this.populateMonth(i,n),this.populateDate(i,n,e)}},{key:"populateYear",value:function(t){var e=this.opts,n=e.minDate,i=e.maxDate,o=e.defaultDate,s=n.getFullYear(),a=i.getFullYear(),r="";for(t=t||o.getFullYear();s<=a;s++)r+='<option value="'.concat(s,'"').concat(s===t?' selected="selected"':"",">").concat(s,"</option>");this.$year.html(r)}},{key:"populateMonth",value:function(t,e){var n=this.opts,i=n.minDate,o=n.maxDate,s=n.defaultDate,a=n.monthNames,r=i.getFullYear(),u=o.getFullYear(),c=r<t?1:i.getMonth()+1,l=t<u?12:o.getMonth()+1,p="";for(e=e||(+this.$month.val()||s.getMonth()+1);c<=l;c++)p+='<option value="'.concat(c,'"').concat(c===e?' selected="selected"':"",">").concat(a[c-1],"</option>");this.$month.html(p)}},{key:"populateDate",value:function(t,e,n){var i=this.opts,o=i.minDate,s=i.maxDate,a=i.defaultDate,r=o.getFullYear(),u=s.getFullYear(),c=o.getMonth()+1,l=s.getMonth()+1,p=r<t||c<e?1:o.getDate(),h=t<u||e<l?f(t,e):s.getDate(),d="";for(n=n||((n=+this.$date.val())?Math.min(n,h):a.getDate());p<=h;p++)d+='<option value="'.concat(p,'"').concat(p===n?' selected="selected"':"",">").concat(p,"</option>");this.$date.html(d)}},{key:"onChangeYear",value:function(t){var e=+t.target.value;this.populateMonth(e),this.$month.triggerHandler("change")}},{key:"onChangeMonth",value:function(t){var e=+this.$year.val(),n=+t.target.value;this.populateDate(e,n),this.$date.triggerHandler("change")}},{key:"onChangeDate",value:function(){this.opts.onSelect(this.getDate())}}]),u}(),f=function(t,e){return new Date(t,e,0).getDate()},o=function(t){var e=t.split("-");return new Date(+e[0],e[1]-1,+e[2])},s=function(t){var e=t.getFullYear(),n=t.getMonth()+1,i=t.getDate();return[e,(n<10?"0":"")+n,(i<10?"0":"")+i].join("-")},a=n;r.default=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"DateSelector",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(n,"TimeSelector",{enumerable:!0,get:function(){return o.default}});var i=s(t("./date-selector")),o=s(t("./time-selector"));function s(t){return t&&t.__esModule?t:{default:t}}},{"./date-selector":2,"./time-selector":4}],4:[function(t,e,l){(function(t){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var e,a=(e="undefined"!=typeof window?window.jQuery:void 0!==t?t.jQuery:null)&&e.__esModule?e:{default:e};function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],i=!0,o=!1,s=void 0;try{for(var a,r=t[Symbol.iterator]();!(i=(a=r.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){o=!0,s=t}finally{try{i||null==r.return||r.return()}finally{if(o)throw s}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var n=function(){function s(t,e,n,i){var o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),r(this,"$hour",void 0),r(this,"$minute",void 0),r(this,"$ampm",void 0),r(this,"opts",void 0),r(this,"isAmpm",void 0);this.isAmpm=!(!n||!n.nodeType),this.opts=a.default.extend({am:"AM",pm:"PM",step:15,onSelect:function(){}},(this.isAmpm?i:n)||{}),this.$hour=(0,a.default)(t).on("change",function(){return o.onChangeHour()}),this.$minute=(0,a.default)(e).on("change",function(){return o.onChangeMinute()}),this.isAmpm&&(this.$ampm=(0,a.default)(n).on("change",function(){return o.onChangeAmpm()})),this.populateHour(),this.populateMinute(),this.populateAmpm()}return function(t,e,n){e&&i(t.prototype,e),n&&i(t,n)}(s,[{key:"getTime",value:function(){var t=+this.$hour.val(),e=+this.$minute.val();return this.isAmpm&&(t=u(t,this.$ampm.val())),"".concat(t<10?"0":"").concat(t,":").concat(e<10?"0":"").concat(e)}},{key:"setTime",value:function(t){var e=o(t.split(":"),2),n=e[0],i=e[1];n=+n,this.isAmpm?(n=c(n),this.$ampm.val(n.ampm),this.$hour.val(n.hour)):this.$hour.val(n),i=Math.min(59,Math.max(0,+i)),i-=i%this.opts.step,this.$minute.val(i)}},{key:"populateHour",value:function(t){for(var e=this.isAmpm?1:0,n=this.isAmpm?12:23,i="";e<=n;e++)i+='<option value="'.concat(e,'"').concat(e===t?' selected="selected"':"",">").concat(e<10?"0":"").concat(e,"</option>");this.$hour.html(i)}},{key:"populateMinute",value:function(t){for(var e=0,n="";e<=59;e+=this.opts.step)n+='<option value="'.concat(e,'"').concat(e===t?' selected="selected"':"",">").concat(e<10?"0":"").concat(e,"</option>");this.$minute.html(n)}},{key:"populateAmpm",value:function(t){if(this.isAmpm){for(var e=[{value:"AM",label:this.opts.am},{value:"PM",label:this.opts.pm}],n="",i=0;i<e.length;i++)n+='<option value="'.concat(e[i].value,'"').concat(e[i].value===t?' selected="selected"':"",">").concat(e[i].label||e[i].value,"</option>");this.$ampm.html(n)}}},{key:"onChangeHour",value:function(){this.opts.onSelect(this.getTime())}},{key:"onChangeMinute",value:function(){this.opts.onSelect(this.getTime())}},{key:"onChangeAmpm",value:function(){this.opts.onSelect(this.getTime())}}]),s}(),u=function(t,e){return t="PM"!==e.toUpperCase()?12===t?0:t:12===t?12:t+12},c=function(t){var e;return{hour:t=t<12?(e="AM",0===t?12:t):(e="PM",12===t?12:t-12),ampm:e}},s=n;l.default=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(t,e,n){"use strict";function i(t){var e=r(t.currentTarget).closest(".ps-js-dropdown"),n=e.find(".ps-js-dropdown-menu"),i=r(document),o=e.data("ps-guid");if(t.preventDefault(),o||(o=_.uniqueId("ps-dropdown-"),e.data("ps-guid",o)),n.is(":visible"))return t.stopPropagation(),i.off("click."+o),void n.hide();n.show(),i.one("click."+o,function(){n.hide()})}function o(t){var e,n="[class*=ps-icon-]",i=".ps-js-dropdown-label",o=r(t.currentTarget),s=o.closest(".ps-js-dropdown"),a=s.find(".ps-js-dropdown-toggle");s.hasClass("ps-js-dropdown--privacy")&&((e=s.children("[type=hidden]")).val(o.data("option-value")),e.triggerHandler("change"),a.find(n).attr("class",o.find(n).attr("class")),a.find(i).html(o.find(i).html()))}var r;(r=jQuery)(function(){r(document).on("click.ps-dropdown",".ps-js-dropdown-menu a",o).on("click.ps-dropdown",".ps-js-dropdown-toggle",i)})},{}],6:[function(t,e,s){(function(t){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var u=e("undefined"!=typeof window?window.jQuery:void 0!==t?t.jQuery:null),c=e("undefined"!=typeof window?window._:void 0!==t?t._:null);function e(t){return t&&t.__esModule?t:{default:t}}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l="ps-focus-area-footer",o=function(){function e(t){var o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n(this,"$footer",void 0),n(this,"$interactions",void 0),n(this,"$menu",void 0),n(this,"$menuInner",void 0),n(this,"$menuItems",void 0),n(this,"$menuMore",void 0),n(this,"$menuDropdown",void 0),n(this,"toggleAid",c.default.throttle(function(){var t=!1,e=!1;if(o.isNarrow()){var n=o.$menuInner.scrollLeft(),i=o.$menuInner[0].scrollWidth;t=0<n,e=n+o.$menuInner[0].clientWidth<i}t?o.$menuAidLeft.show():o.$menuAidLeft.hide(),e?o.$menuAidRight.show():o.$menuAidRight.hide()},250)),this.$footer=(0,u.default)(t),this.$interactions=this.$footer.find(".ps-js-focus-interactions"),this.$menu=this.$footer.find(".ps-focus__menu"),this.$menuInner=this.$menu.find(".ps-focus__menu-inner"),this.$menuItems=this.$menu.find(".ps-focus__menu-item"),this.$menuMore=this.$menuItems.filter(".ps-js-focus-link-more"),this.$menuDropdown=this.$menu.find(".ps-js-focus-link-dropdown"),this.$menuAidLeft=this.$menu.find(".ps-js-aid-left"),this.$menuAidRight=this.$menu.find(".ps-js-aid-right"),this.centerActiveMenu(),c.default.defer(function(){return o.rearrange()}),(0,u.default)(window).on("resize.".concat(l),c.default.debounce(function(){return o.rearrange()},1e3))}return function(t,e,n){e&&i(t.prototype,e),n&&i(t,n)}(e,[{key:"isNarrow",value:function(){return window.innerWidth<=480}},{key:"hasTouch",value:function(){return"ontouchstart"in window||0<navigator.msMaxTouchPoints}},{key:"centerActiveMenu",value:function(){if(this.isNarrow()){var t=this.$menuInner,e=this.$menuItems.filter(".current"),n=t.width(),i=e.position().left,o=e.width();t.scrollLeft(i-(n-o)/2)}}},{key:"reset",value:function(){var t=this;this.$menuDropdown.hide().empty(),this.$menuMore.detach().off("click"),this.$menuItems.css("display",""),this.detachScroller(),this.$menuInner.off("scroll").on("scroll",function(){return t.toggleAid()}),this.toggleAid()}},{key:"rearrange",value:function(){var e=this;if(this.reset(),this.isNarrow())this.hasTouch()||this.attachScroller();else for(var t,n=this.$footer.width()-this.$interactions.width(),i=0;++i<=20&&this.$menuInner.width()>n;)1===i&&(this.$menuMore.insertBefore(this.$menuDropdown.parent()),this.$menuMore.show(),this.$menuMore.on("click",function(t){t.preventDefault(),t.stopPropagation(),e.toggleDropdown()})),(t=this.$menuMore.prevAll(".ps-focus__menu-item:visible").first()).length&&(t=t.hide().clone(),this.$menuDropdown.prepend(t.css("display","")))}},{key:"toggleDropdown",value:function(){var t=this,e=(0,u.default)(document),n="click.".concat(l);this.$menuDropdown.is(":visible")?(this.$menuDropdown.hide(),e.off(n)):(this.$menuDropdown.show(),e.one(n,function(){return t.$menuDropdown.hide()}))}},{key:"attachScroller",value:function(){var i,o,s,a=!1,r=!1;this.$menuInner.on("mousedown mouseup mousemove mouseleave",function(t){if(t.preventDefault(),t.stopPropagation(),"mousedown"===t.type)r=!(a=!0),i=[t.clientX,t.clientY];else if("mousemove"==t.type&&a){var e=(0,u.default)(this);o=[t.clientX,t.clientY],s=[o[0]-i[0],o[1]-i[1]],e.scrollLeft(e.scrollLeft()-s[0]),e.scrollTop(e.scrollTop()-s[1]),i=[t.clientX,t.clientY],r=!0}else if(("mouseup"===t.type||"mouseleave"===t.type)&&(a=!1,r)){var n=(0,u.default)(t.target).closest("a");n.length&&(n.on("click.".concat(l),function(t){return t.preventDefault()}),c.default.defer(function(){return n.off("click.".concat(l))}))}})}},{key:"detachScroller",value:function(){this.$menuInner.off("mousedown mouseup mousemove mouseleave")}}]),e}();s.default=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],7:[function(u,t,c){(function(t){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var i=e("undefined"!=typeof window?window.jQuery:void 0!==t?t.jQuery:null),o="undefined"!=typeof window?window.peepso:void 0!==t?t.peepso:null,s=e(u("./focus-area-footer"));function e(t){return t&&t.__esModule?t:{default:t}}function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var n=function(){function n(t){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),r(this,"$container",void 0),r(this,"$avatar",void 0),r(this,"$footer",void 0),r(this,"footer",void 0),this.$container=(0,i.default)(t),this.$avatar=this.$container.find(".ps-js-focus-avatar-button"),this.$footer=this.$container.find(".ps-focus__footer"),this.$avatar.length&&this.$avatar.on("click",function(t){return e.onClickAvatar(t)}),this.$footer.length&&(this.footer=new s.default(this.$footer[0])),o.observer.addAction("avatar_updated",function(t){return e.onAvatarUpdated(t)},10,1)}return function(t,e,n){e&&a(t.prototype,e),n&&a(t,n)}(n,[{key:"onClickAvatar",value:function(t){t.preventDefault(),t.stopPropagation(),o.observer.doAction("avatar_update_dialog")}},{key:"onAvatarUpdated",value:function(){}}]),n}();c.default=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./focus-area-footer":6}],8:[function(t,e,n){"use strict";var i,o=(i=t("./focus-area"))&&i.__esModule?i:{default:i};document.addEventListener("DOMContentLoaded",function(){var t=document.querySelector(".ps-js-focus");t&&new o.default(t)})},{"./focus-area":7}],9:[function(t,e,m){(function(t){"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var r,u,c,l=e("undefined"!=typeof window?window.jQuery:void 0!==t?t.jQuery:null),p=(e("undefined"!=typeof window?window._:void 0!==t?t._:null),function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==a(t)&&"function"!=typeof t)return{default:t};var e=d();if(e&&e.has(t))return e.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=t[o]}n.default=t,e&&e.set(t,n);return n}("undefined"!=typeof window?window.peepso:void 0!==t?t.peepso:null)),h="undefined"!=typeof window?window.peepsodata:void 0!==t?t.peepsodata:null;function d(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return d=function(){return t},t}function e(t){return t&&t.__esModule?t:{default:t}}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f(t,e){if(clearTimeout(c),r=r||((u=(0,l.default)("<div />").append(h.hovercard.template)).css({position:"absolute"}),(r=(0,l.default)("<div />").css({display:"none",height:1,overflow:"visible",position:"absolute",width:1,zIndex:100001})).on("mouseenter touchstart",function(t){t.stopPropagation(),f()}),r.on("mouseleave",function(t){t.stopPropagation(),v()}),r.append(u).appendTo(document.body),r),"loading"===t?r.find(".ps-js-loading").show():t&&(r.find(".ps-js-loading").hide(),r.find(".ps-js-name").html(t.name),r.find(".ps-js-avatar").attr("src",t.avatar),r.find(".ps-js-cover").css({backgroundImage:"url(".concat(encodeURI(t.cover),")")}),r.find(".ps-js-views").html(t.views||0),r.find(".ps-js-likes").html(t.likes||0),r.find(".ps-js-link").attr("href",t.link||"#"),p.observer.doAction("hovercard_update_html",r,t)),r.show(),p.default.isTouch()&&(0,l.default)(document).off("touchstart.hovercard").one("touchstart.hovercard",v),e&&e.currentTarget&&e.clientX){var n=(0,l.default)(e.currentTarget),i=n.offset(),o=window.innerWidth<=480;u.css({top:"",left:0,bottom:0,right:o?0:""}),r.css({top:i.top-r.height(),left:o?0:e.clientX,right:o?0:"",width:o?"":1});var s=u.get(0).getBoundingClientRect();s.top<0&&(r.css({top:i.top+n.height()}),u.css({bottom:"",top:0})),o||s.right>(window.innerWidth||document.documentElement.clientWidth)&&u.css({left:"",right:0})}}function v(){r&&(c=setTimeout(function(){r.hide(),p.default.isTouch()&&(0,l.default)(document).off("touchstart.hovercard")},200))}var o=function(){function s(t,e){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),n(this,"$elem",void 0),n(this,"id",void 0),n(this,"data",void 0),n(this,"timer",void 0),this.id=e,this.$elem=(0,l.default)(t),this.$elem.on("mouseenter touchstart",function(t){t.stopPropagation(),i.show(t)}),this.$elem.on("mouseleave",function(t){t.stopPropagation(),i.hide()}),p.default.isTouch()&&this.$elem.on("click",function(t){t.preventDefault(),t.stopPropagation()}),p.observer.addAction("profile_update_like",function(t,e){if(+t==+i.id){var n=s.cache[i.id];n&&(n.likes=e)}},10,2)}return function(t,e,n){e&&i(t.prototype,e),n&&i(t,n)}(s,[{key:"getData",value:function(){var o=this;return new p.Promise(function(e,n){var i=s.cache[o.id];i?e(i):p.default.postJson("hovercard.info",{userid:o.id},function(t){t.success?(i=s.cache[o.id]=t.data,e(i)):n()})})}},{key:"show",value:function(n){var i=this;this.timer=setTimeout(function(){var e=setTimeout(function(){f("loading",n)},500);i.getData().then(function(t){clearTimeout(e),i.timer&&f(t,n)})},300)}},{key:"hide",value:function(){clearTimeout(this.timer),this.timer=null,v()}}]),s}();n(o,"cache",{});var s=o;m.default=s,(0,l.default)(function(){h.hovercard&&(0,l.default)(document).on("mouseenter touchstart","[data-hover-card]",function(t){var e=(0,l.default)(t.currentTarget);if(!e.data("ps-hovercard")){var n=e.data("hover-card"),i=new o(e[0],n);e.data("ps-hovercard",i),i.show(t)}})})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],10:[function(t,e,n){"use strict";t("./autosize"),t("./dropdown"),t("./share"),t("./time"),t("./safety-warning"),t("./posttabs"),t("./postbox-legacy"),t("./postbox"),t("./notification-general"),t("./widgets"),t("./third-party-fixes"),t("./lightbox"),t("./focus-area"),t("./hover-card")},{"./autosize":1,"./dropdown":5,"./focus-area":8,"./hover-card":9,"./lightbox":11,"./notification-general":12,"./postbox":17,"./postbox-legacy":16,"./posttabs":21,"./safety-warning":22,"./share":23,"./third-party-fixes":24,"./time":25,"./widgets":26}],11:[function(t,e,n){"use strict";var i,u=s(t("imagesloaded")),o=s(t("swipejs"));function s(t){return t&&t.__esModule?t:{default:t}}i=new(function(r,i){var e=peepsolightboxdata.template.replace(/>\s+</g,"><"),t="ps-lightbox-data--opened",n="ps-lightbox-close--invert";function o(){}return o.prototype={init:function(){this.$container||(this.$container=r(e),this.$padding=this.$container.find(".ps-lightbox-padding"),this.$wrapper=this.$container.find(".ps-lightbox-wrapper"),this.$close=this.$container.find(".ps-lightbox-close"),this.$object=this.$container.find(".ps-lightbox-object"),this.$prev=this.$container.find(".ps-lightbox-arrow-prev"),this.$next=this.$container.find(".ps-lightbox-arrow-next"),this.$spinner=this.$container.find(".ps-lightbox-spinner"),this.$attachment=this.$container.find(".ps-lightbox-data"),this.$btnattachment=this.$container.find(".ps-lightbox-data-toggle"),this.$imagelink=this.$container.find(".ps-lightbox-imagelink"),this.attachevents(),this.$container.appendTo(document.body)),this.isMobile()&&(this.$viewport||(this.$viewport=r("meta[name=viewport]"),this.$viewport.length||(this.$viewport=r('<meta name="viewport" content="" />').appendTo("head"))),this.vpNoZoom="width=device-width, user-scalable=no",this.vpValue||(this.vpValue=this.$viewport.attr("content"),this.$viewport.attr("content",this.vpNoZoom))),this.options.simple?this.$container.addClass("ps-lightbox-simple"):this.$container.removeClass("ps-lightbox-simple"),this.$prev.hide(),this.$next.hide(),this.$container.show(),this.resetHeight(),this.options.simple&&this.setHeight();var t=r(window);t.off("resize.ps-lightbox"),this.options.simple&&t.on("resize.ps-lightbox",r.proxy(this.setHeight,this)),r(document.body).off("keyup.ps-lightbox").on("keyup.ps-lightbox",r.proxy(function(t){27===t.keyCode&&this.close()},this))},open:function(t,e){if(this.data=t||[],this.options=e||{},this.index=e.index||0,this.init(),!this.options.simple){var n=r('\n\t\t\t\t<div style="overflow:hidden; visibility:hidden; position:relative; height:100%;">\n\t\t\t\t\t<div style="overflow: hidden; position: relative; height:100%;"></div>\n\t\t\t\t</div>\n\t\t\t');_.each(this.data,function(t,e){n.children().append('\n\t\t\t\t\t<div class="ps-js-item" data-spinner="1" style="float:left; width:100%; position:relative; height:100%; color:white;">\n\t\t\t\t\t\t<div class="ps-lightbox-spinner" style="display:block;"></div>\n\t\t\t\t\t</div>\n\t\t\t\t')}),this.$object.empty(),this.$object.append(n),this.mySwipe=i(n[0],{draggable:!0,startSlide:this.index,callback:r.proxy(function(t,e){this.go(t)},this)})}this.togglenav(),this.go(this.index),this.hideAttachment(),r("html, body").addClass("ps-lightbox--open")},close:function(){this.$container&&(this.$container.hide(),this.$object.empty(),this.$attachment.empty(),this.isMobile()&&this.vpValue&&(this.$viewport.attr("content",this.vpValue),this.vpValue=!1),r(window).off("resize.ps-lightbox"),r(document.body).off("keyup.ps-lightbox"),r("html, body").removeClass("ps-lightbox--open"))},go:function(t){var e,n,i;if("function"==typeof this.options.beforechange&&this.options.beforechange(this),this.data[t])if(this.data[this.index]&&(e=r.trim(this.$attachment.html()))&&(this.data[this.index].attachment=e),this.index=t,this.$attachment.html(this.data[this.index].attachment||""),this.options.simple)this.$object.html(this.data[this.index].content),(n=this.$object.find("img")).length&&(this.showLoading(),this.$close.hide(),n.on("load",r.proxy(function(){this.hideLoading(),this.$close.show(),this.resetHeight(),this.setHeight.apply(this)},this)),i=n.attr("src").replace("/thumbs/","/").replace(/_(l|m_s|s_s)\./,"."),this.$imagelink.find("a").attr("href",i)),this.options.nofulllink?this.$imagelink.hide():this.$imagelink.show();else{var o=this.$object.find(".ps-js-item").eq(this.index);if(2===this.mySwipe.getNumSlides()&&(o=o.add(this.$object.find(".ps-js-item").eq(this.index+2))),o.data("spinner")){o.removeData("spinner"),o.removeAttr("data-spinner");var s=this.data[this.index].content,a=r("<div />").append(s).children("img");a.length?(0,u.default)(a[0],function(){o.html(s)}):o.html(s)}}"function"==typeof this.options.afterchange&&this.options.afterchange(this),r(document).trigger("ps_lightbox_navigate")},prev:function(){this.mySwipe.prev()},next:function(){this.mySwipe.next()},togglenav:function(){var t=this.$prev.add(this.$next);this.$container.off("click.ps-lightbox",".ps-lightbox-arrow-prev"),this.$container.off("click.ps-lightbox",".ps-lightbox-arrow-next"),r(window).off("keyup.ps-lightbox"),this.options.nonav||!this.data.length||this.data.length<=1?t.hide():(t.show(),this.$container.on("click.ps-lightbox",".ps-lightbox-arrow-prev",r.proxy(this.prev,this)),this.$container.on("click.ps-lightbox",".ps-lightbox-arrow-next",r.proxy(this.next,this)),r(window).on("keyup.ps-lightbox",r.proxy(function(t){var e=t.keyCode;37===e?this.prev():39===e&&this.next()},this)))},isAttachmentOpened:function(){return this.$attachment.hasClass(t)},showAttachment:function(){this.$attachment.addClass(t),this.$close.addClass(n)},hideAttachment:function(){this.$attachment.removeClass(t),this.$close.removeClass(n)},showLoading:function(){this.$object.hide(),this.$spinner.show()},hideLoading:function(){this.$spinner.hide(),this.$object.show()},attachevents:function(){this.$container.on("click.ps-lightbox",".ps-lightbox-padding",r.proxy(function(t){t.target===t.currentTarget&&(t.stopPropagation(),this.close())},this)),this.$btnattachment.on("click",r.proxy(function(){this.isAttachmentOpened()?this.hideAttachment():this.showAttachment()},this)),this.$close.on("click",r.proxy(function(){this.isAttachmentOpened()?this.hideAttachment():this.close()},this)),this.$imagelink.on("click","a",r.proxy(function(){this.close()},this)),this.$attachment.on("keyup.ps-lightbox",function(t){t.stopPropagation()})},isMobile:function(){var t=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent);return this.isMobile=t?function(){return!0}:function(){return!1},t},resetHeight:function(){this.$object.find("img").css("maxHeight","")},setHeight:_.debounce(function(){this.$object.find("img").css("maxHeight",this.$wrapper.height())},100)},o}(jQuery||$,o.default)),peepso.lightbox=function(t,e){"close"!==t?"function"==typeof t?(i.options=e||{},i.init(),i.showLoading(),t(function(t,e){i.hideLoading(),i.open(t,e||{})})):i.open(t,e||{}):i.close()},peepso.simple_lightbox=function(t){peepso.lightbox([{content:'<div style="display:inline-block;"><img src="'+t+'" /></div>'}],{simple:!0})}},{imagesloaded:31,swipejs:32}],12:[function(o,t,e){(function(t){"use strict";var e=i("undefined"!=typeof window?window.jQuery:void 0!==t?t.jQuery:null),n=i(o("./popover"));function i(t){return t&&t.__esModule?t:{default:t}}(0,e.default)(function(t){t(".ps-js-notifications").each(function(){new n.default(this)})})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./popover":13}],13:[function(g,t,w){(function(t){"use strict";Object.defineProperty(w,"__esModule",{value:!0}),w.default=void 0;var c=n("undefined"!=typeof window?window.jQuery:void 0!==t?t.jQuery:null),i=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=a();if(e&&e.has(t))return e.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=t[o]}n.default=t,e&&e.set(t,n);return n}("undefined"!=typeof window?window.peepso:void 0!==t?t.peepso:null),e=n(g("./singleton")),o=n(g("../notification-popover"));function a(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}function n(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function u(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function l(t,e,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var d=peepsodata.mark_all_as_read_text,f=peepsodata.mark_all_as_read_confirm_text,v=peepsodata.show_unread_only_text,m=peepsodata.show_all_text,b=new e.default,y=function(){function n(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(e=u(this,p(n).call(this,t))).loading=!1,e.loadEnd=!1,b.on("counter:updated",function(t){e.updateCounter(t)}),b.on("html:updated",function(t){e.updateHtml(t)}),b.on("unread_only:updated",function(t){e.updateButton(t)}),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(n,o.default),function(t,e,n){e&&s(t.prototype,e),n&&s(t,n)}(n,[{key:"createBody",value:function(){var e=this;return l(p(n.prototype),"createBody",this).call(this).on("mousedown",".ps-js-notification",function(t){e.onItemClick(t)}).on("click",".ps-js-mark-as-read",function(t){e.onMarkRead(t)}).on("click",".ps-js-notification a",function(t){t.stopPropagation()}).on("mousedown",".ps-js-mark-as-read",function(t){t.stopPropagation()})}},{key:"createFooter",value:function(){var e=this;this.$btnMarkAllRead=(0,c.default)('<a href="#">'+d+"</a>").css({float:"left",width:"50%"}).on("click",function(t){e.onMarkAllRead(t)});var t=i.observer.applyFilters("notification_unread_only",0);return this.$btnToggleUnreadOnly=(0,c.default)('<a href="#">'+(t?m:v)+"</a>").css({float:"left",width:"50%"}).on("click",function(t){e.onToggleUnreadOnly(t)}),(0,c.default)('<div class="ps-popover-footer app-box-footer ps-clearfix"></div>').append(this.$btnMarkAllRead).append(this.$btnToggleUnreadOnly)}},{key:"updateCounter",value:function(t){var e=this.$counter;0<t?e.text(t).show():e.hide()}},{key:"updateHtml",value:function(t){this.html!==t&&(this.html=t,this.$popoverBody.html(t),(0,c.default)(document.body).hasClass("wp-admin")&&this.$popoverBody.find("a[href]").attr("target","_blank"))}},{key:"updateButton",value:function(t){var e=this.$btnToggleUnreadOnly,n=t?m:v;this.loadEnd=!1,e.html(n)}},{key:"toggle",value:function(t){if(l(p(n.prototype),"toggle",this).call(this,t),!this.html){var e=+this.$counter.text()||0;b.unreadCount=e,b.fetch(1)}}},{key:"loadNext",value:function(){var t,e,n=this;this.loading||this.loadEnd||(this.loading=!0,t=this.$popoverLoading,(e=this.$popoverBody.append(t))[0].scrollTop=e[0].scrollHeight,b.next().catch(function(){n.loadEnd=!0}).then(function(){n.loading=!1,t.detach(),n.loadEnd||n.tryLoadNext()}))}},{key:"onItemClick",value:function(t){var e,n,i,o=this,s=(0,c.default)(t.currentTarget),a=s.data("id"),r=s.data("unread"),u="ps-notification--unread";t.stopPropagation(),3===t.which||t.ctrlKey||t.altKey||(("_blank"===(e=s.find("a").eq(0)).attr("target")||2===t.which||t.metaKey||t.shiftKey)&&(i=!0),r?(i||e.on("click",function(t){t.preventDefault(),t.stopPropagation()}),s.data("progress")||(s.data("progress",!0).css("opacity",.5),s.removeClass(u),n=s.find(".ps-js-mark-as-read").hide(),b.markRead(a).then(function(){s.data("unread",!1),n.remove(),i||(e.off("click"),e[0].click(),o.openUrl(e.attr("href")))}).catch(function(){s.addClass(u),n.show()}).then(function(){s.data("progress",!1).css("opacity","")}))):i||this.openUrl(e.attr("href")))}},{key:"onMarkRead",value:function(t){var e=(0,c.default)(t.currentTarget),n=e.closest(".ps-js-notification"),i=n.data("id"),o="ps-notification--unread";t.preventDefault(),t.stopPropagation(),n.data("progress")||(n.data("progress",!0).css("opacity",.5),n.removeClass(o),e.hide(),b.markRead(i).then(function(){n.data("unread",!1),e.remove()}).catch(function(){n.addClass(o),e.show()}).then(function(){n.data("progress",!1).css("opacity","")}))}},{key:"onMarkAllRead",value:function(t){var e=this,n=this.$btnMarkAllRead;t.preventDefault(),t.stopPropagation(),n.data("progress")||confirm(f)&&(n.data("progress",!0).css("opacity",.5),b.markRead().then(function(){e.toggle()}).catch(c.default.noop).then(function(){n.data("progress",!1).css("opacity","")}))}},{key:"openUrl",value:function(t){var e=window.location.href,n=t,i=n.replace(/#.*$/,"")===e.replace(/#.*$/,"");setTimeout(function(){window.location=n,i&&window.location.reload()},1)}},{key:"onToggleUnreadOnly",value:function(t){var e=this,n=this.$btnToggleUnreadOnly;t.preventDefault(),t.stopPropagation(),n.data("progress")||(this.$popoverBody.empty().append(this.$popoverLoading),n.data("progress",!0).css("opacity",.5),b.toggleUnreadOnly().catch(c.default.noop).then(function(){n.data("progress",!1).css("opacity",""),e.tryLoadNext()}))}}]),n}();w.default=y}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../notification-popover":15,"./singleton":14}],14:[function(t,e,d){(function(t){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;var e,i,a=(e="undefined"!=typeof window?window.jQuery:void 0!==t?t.jQuery:null)&&e.__esModule?e:{default:e},r=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==c(t)&&"function"!=typeof t)return{default:t};var e=u();if(e&&e.has(t))return e.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=t[o]}n.default=t,e&&e.set(t,n);return n}("undefined"!=typeof window?window.peepso:void 0!==t?t.peepso:null);function u(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?p(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var n=function(){function n(){var e;if(!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),!i){e=s(this,l(n).call(this)),i=p(e),e.notifications=[""],e.unreadCount=null;var t=0;window.localStorage&&(t=+window.localStorage.getItem("peepso_notif_unread_only")),e.params={page:1,per_page:5,unread_only:t},r.observer.addFilter("notification_unread_only",function(){return e.params.unread_only},10,1),e.fetchEnd=!1,r.observer.addAction("notification_update",function(t){e.doUpdate(t)},10,1)}return s(e,i)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(n,r.default.npm.EventEmitter),function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(n,[{key:"doUpdate",value:function(t){var e;t&&t.data&&(e=+(t.data["ps-js-notifications"]||{}).count,_.isNaN(e)||this.unreadCount===e||(this.unreadCount=e,this.emit("counter:updated",e),this.reset()))}},{key:"reset",value:function(){var e=this;return new r.Promise(function(t){e.notifications=[""],e.params.page=1,e.fetchEnd=!1,e.fetch().catch(a.default.noop).then(function(){t()})})}},{key:"fetch",value:function(t){var e,i,o=this,n=0<arguments.length&&void 0!==t?t:null,s=_.extend({},this.params,{page:n||this.params.page});return(e=new r.Promise(function(e,n){o.fetchEnd?e([]):r.default.postJson("notificationsajax.get_latest",s,function(t){t.success?(i=t.data||{},e(i.notifications||[])):t.errors&&1===s.page?n(t.errors):e([])})})).then(function(t){_.isArray(t)&&t.length?o.notifications[s.page]=t:o.fetchEnd=!0}).catch(function(t){o.fetchEnd=!0,o.params.page=1,o.notifications=["",['<div class="ps-notification">','<a class="ps-notification__inside">','<div class="ps-notification__desc">',t.join("<br />"),"</div>","</a>","</div>"].join("")]}).then(function(){o.emit("html:updated",o.html)}),e}},{key:"next",value:function(){var i=this;return new r.Promise(function(t,e){var n=i.params.page+1;i.fetchEnd?e():i.fetch(n).then(function(){i.params.page=n,t()})})}},{key:"markRead",value:function(t){var s=this,a=0<arguments.length&&void 0!==t?t:null;return new r.Promise(function(i,o){var t=a?{note_id:a}:null;r.default.postJson("notificationsajax.mark_as_read",t,function(t){if(t.success){var e=a?Math.max(s.unreadCount-1,0):0,n=e-s.unreadCount;s.unreadCount=e,s.notifications=s.__markHtmlAsRead(s.notifications,a),s.emit("counter:updated",s.unreadCount),s.emit("html:updated",s.html),n=(0<=n?"+":"")+n,r.observer.doAction("notification_titlebar",n),i()}else o()})})}},{key:"toggleUnreadOnly",value:function(){var i=this;return new r.Promise(function(t,e){var n=i.params.unread_only;n=n?0:1,i.params.unread_only=n,i.reset().then(function(){i.emit("unread_only:updated",n),window.localStorage&&window.localStorage.setItem("peepso_notif_unread_only",n),t()})})}},{key:"__markHtmlAsRead",value:function(t,e){var i=this,o=1<arguments.length&&void 0!==e?e:null,s="ps-js-notification";return _.map(t,function(t){if(_.isArray(t))t=i.__markHtmlAsRead(t,o);else if(_.isString(t)&&t.length){var e=(0,a.default)("<div/>").html(t),n=e.find("."+s);o&&(n=n.filter("."+s+"--"+o)),n.removeClass("ps-notification--unread").removeAttr("data-unread"),n.find(".ps-js-mark-as-read").remove(),t=e.html()}return t},this)}},{key:"html",get:function(){return _.flatten(this.notifications).join("")}}]),n}();d.default=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],15:[function(t,e,a){(function(t){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var e,i=(e="undefined"!=typeof window?window.jQuery:void 0!==t?t.jQuery:null)&&e.__esModule?e:{default:e};function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var s=peepsodata.loading_gif,n=function(){function n(t){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.guid=_.uniqueId("psNotificationPopover_"),this.$elem=(0,i.default)(t),this.$counter=this.$elem.find(".ps-js-counter"),this.$popover=null,this.$popoverBody=null,this.$popoverFooter=null,this.$popoverLoading=null,this.$elem.on("click",function(t){e.toggle(t)}),this.render()}return function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(n,[{key:"render",value:function(){this.$popover||(this.$popoverBody=this.createBody(),this.$popoverFooter=this.createFooter(),this.$popoverLoading=(0,i.default)('<div class="ps-popover-loading" style="padding:5px 0" />').append('<img src="'+s+'" />').appendTo(this.$popoverBody),this.$popover=(0,i.default)('<div class="ps-popover app-box" />').append(this.$popoverBody).append(this.$popoverFooter).hide(),this.$elem.append(this.$popover))}},{key:"createBody",value:function(){var e=this;return(0,i.default)('<div class="ps-notifications" />').css({maxHeight:"40vh",overflow:"auto"}).on("wheel",function(t){e.disableParentScroll(t)}).on("scroll",function(t){e.handleScroll(t)})}},{key:"createFooter",value:function(){return(0,i.default)()}},{key:"toggle",value:function(t){var e=this,n="click."+this.guid;if(t&&t.preventDefault(),this.$popover||this.render(),this.$popover.is(":visible"))return(0,i.default)(document).off(n),void this.$popover.stop().slideUp("fast");_.defer(function(){e.$popover.stop().slideDown({duration:"fast",start:function(){e.$popover.position({my:"right top",at:"right bottom",of:e.$elem,collision:"flip"})},done:function(){(0,i.default)(document).one(n,function(t){e.$popover.hide()}),e.tryLoadNext()}})})}},{key:"tryLoadNext",value:function(){var t=this.$popoverBody[0],e=t.scrollTop,n=t.scrollHeight-t.clientHeight;Math.abs(e-n)<=1&&this.loadNext()}},{key:"loadNext",value:function(){}},{key:"disableParentScroll",value:function(t){var e,n=t.currentTarget,i=n.scrollTop,o=t.originalEvent.deltaY;0===i&&o<0?(t.preventDefault(),t.stopPropagation()):(e=n.scrollHeight-n.clientHeight,Math.abs(i-e)<=1&&0<o&&(t.preventDefault(),t.stopPropagation()))}},{key:"handleScroll",value:function(){this.tryLoadNext()}}]),n}();a.default=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],16:[function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o;function s(){this.can_submit=!1,this.$postbox=null,this.$url_preview_container=jQuery("<div class='url-preview-container'></div>"),this.embedData=null,this.embedExceptions=[]}(o=jQuery).fn.pspostbox=function(t){if(!(this.length<=0)){var n=this;return this.$textarea=null,this.$access=null,this.$charcount=null,this.$cancel_button=null,this.$save_button=null,this.$posttabs=null,this.$privacy_dropdown=null,this.can_submit=!1,this.init=function(t){var n=this,e={textarea:"textarea.ps-postbox-textarea",mirror:".ps-postbox-mirror",addons:".ps-postbox-addons",access:"#postbox_acc",save_url:"postbox.post",charcount:".post-charcount",cancel_button:".ps-button-cancel",save_button:".postbox-submit",send_button_text:void 0,text_length:peepsodata.postsize,autosize:!0};this.opts=e,o.extend(!0,this.opts,t),this.guid=_.uniqueId("postbox-"),this.$posttabs=o(this).find(".ps-postbox-tab-root").ps_posttabs({container:this}),this.$textarea=jQuery(this.opts.textarea,this),this.$mirror=jQuery(this.opts.mirror,this),this.$addons=jQuery(this.opts.addons,this),this.$access=o(this.opts.access,this),this._default_access=this.$access.val(),this.$charcount=o(this.opts.charcount,this),this.$cancel_button=o(this.opts.cancel_button,this),this.$save_button=o(this.opts.save_button,this),_.isUndefined(this.opts.send_button_text)||this.$save_button.html(this.opts.send_button_text),this.$privacy=o("#privacy-tab",this),this.orig_height=this.$textarea.height(),this.opts.autosize&&this.$textarea.autosize(),this.$textarea.attr("maxlength",this.opts.text_length).on("keydown",function(t){n.on_keydown(t)}).on("keypress",function(t){n.on_keypress(t)}).on("paste",function(t){n.on_paste(t)}).on("focus",function(t){n.on_focus()}).on("keyup",function(t){n.on_change()}).on("input",function(t){n.on_input()}),this.$charcount.html(this.opts.text_length+""),this.$privacy_dropdown=o(".ps-privacy-dropdown",this.$privacy),this.$privacy_dropdown.on("click a",jQuery.proxy(function(t){var e=jQuery(t.target).closest("a"),n=this.$privacy.find(".interaction-icon-wrapper .pstd-secondary"),i=jQuery("#postbox_acc");t.stopPropagation(),n.find("i").attr("class",e.find("i").attr("class")),n.find("span").html(e.find("span").text()),i.val(e.attr("data-option-value")),this.$privacy_dropdown.hide()},this)),this.$privacy.on("click",function(t){n.privacy(t)}),peepso.observer.addAction("postbox_group_set",function(t){t===n&&n.$privacy.hide()},10,1),peepso.observer.addAction("postbox_group_reset",function(t){t===n&&n.$privacy.show()},10,1),jQuery("nav.ps-postbox-tab ul li a").click(this.clear_tabs),jQuery("#status-post",n).addClass("active"),jQuery(this.$posttabs).on("peepso_posttabs_show-status",function(){jQuery("#status-post",n).addClass("active"),jQuery(".ps-postbox-status").show()}),peepso.observer.addAction("postbox_type_set",function(t,e){t===n&&"status"===e&&jQuery("#status-post",n).trigger("click")},10,2),jQuery("#status-post",n).on("click",function(){jQuery(n.$posttabs).find("[data-tab='status']").trigger("click")}),this.$posttabs.on("peepso_posttabs_submit-status",function(){n.save_post()}),this.$posttabs.on("peepso_posttabs_cancel-status",function(){jQuery("#status-post",n).removeClass("active")}),this.$posttabs.on("peepso_posttabs_submit",function(){n.$textarea.attr("readonly","readonly"),n.find(".ps-postbox-status").css("opacity",.5)}),this.$posttabs.on("peepso_posttabs_cancel",function(){n.$textarea.val(""),n.cancel_post()}),this.find(".interactions > ul > li > .interaction-icon-wrapper a").on("click",function(t,e){e||n.find(".interactions > ul > li > .interaction-icon-wrapper a").not(this).trigger("peepso.interaction-hide",[!0])}),this._load_addons()},this._load_addons=function(){var t=peepso.observer.applyFilters("peepso_postbox_addons",[]);o(t).each(function(t,e){e.set_postbox(n),e.init()})},this.clear_tabs=function(){peepso.observer.applyFilters("postbox_clear_tabs",null)},this.privacy=function(t){var e=this;this.$privacy_dropdown.show(),jQuery(document).on("mouseup.postbox-privacy",function(t){e.$privacy_dropdown.is(t.target)||0!==e.$privacy_dropdown.has(t.target).length||(e.$privacy_dropdown.hide(),jQuery(document).off("mouseup.postbox-privacy"))})},this.save_post=function(){var t={content:this.$textarea.val(),id:peepsodata.currentuserid,uid:peepsodata.userid,acc:this.$access.val(),type:"activity"};_.isUndefined(this.opts.postbox_req)||("undefined"==typeof Function?"undefined":i(Function))!==i(this.opts.postbox_req)||(t=this.opts.postbox_req.apply(null,[t])),t=peepso.observer.applyFilters("postbox_req",t),t=peepso.observer.applyFilters("postbox_req_"+this.guid,t),this.save_post_queue||(this.save_post_queue=[]),this.save_post_queue.push(t),this.on_before_save(),this.save_post_progress||(this.save_post_progress=!0,this.save_post_execute())},this.save_post_execute=function(){if(!this.save_post_queue.length)return peepso.observer.applyFilters("peepso_postbox_enter_to_send",!1)||(jQuery(".ps-postbox-loading",this).hide(),jQuery(".ps-postbox-action",this).css("display","flex"),this.$posttabs.on_cancel()),this.save_post_progress=!1,this.on_queue_clear(),void postbox.remove_broken_thumbnails();var e=this.save_post_queue.shift();peepso.observer.applyFilters("peepso_postbox_enter_to_send",!1)||(jQuery(".ps-postbox-action",this).css("display","none"),jQuery(".ps-postbox-loading",this).show()),peepso.disableAsync().postJson(this.opts.save_url,e,function(t){t.success?(n.on_save(t),jQuery(n).trigger("postbox.post_saved",[e,t])):n.on_error(t),n.save_post_execute()})},this.on_before_save=function(){("undefined"==typeof Function?"undefined":i(Function))===i(this.opts.on_before_save)&&this.opts.on_before_save.apply(this)},this.on_save=function(t){var e=peepso.observer.applyFilters("peepso_postbox_onsave",!1,this);"function"==typeof e?e.apply(this,[t]):"function"==typeof this.opts.on_save&&(this.opts.on_save.apply(this,[t]),this.$textarea.css("height",this.orig_height),jQuery(this).trigger("postbox.post_saved",this))},this.on_queue_clear=function(){("undefined"==typeof Function?"undefined":i(Function))===i(this.opts.on_queue_clear)&&this.opts.on_queue_clear.apply(this)},this.on_error=function(t){("undefined"==typeof Function?"undefined":i(Function))===i(this.opts.on_error)?this.opts.on_error.apply(this,[t]):!1===_.isUndefined(t.errors[0])&&psmessage.show("Error",t.errors[0])},this.cancel_post=function(){this.$textarea.css("height",this.orig_height),this.$textarea.removeAttr("readonly"),this.find(".ps-postbox-status").css("opacity",""),this.on_change(),jQuery(this).trigger("postbox.post_cancel")},this.on_focus=function(){jQuery(".ps-postbox-tab-root",n).hide(),jQuery(".ps-postbox-tab.interactions",n).attr("data-tab-shown",this.$posttabs.current_tab().data("tab")),jQuery(".ps-postbox-tab.interactions",n).show()},this.on_keydown=function(t){if(this._go_submit=!1,13!==t.keyCode)return!0;var e=this.$textarea.val(),n=jQuery.trim(e);return!t.shiftKey&&peepso.observer.applyFilters("peepso_postbox_enter_to_send",!1)&&(n.length||this.submitable(e))?(t.preventDefault(),this._go_submit=!0,this.$posttabs.on_submit(),!1):n.length?void 0:(t.preventDefault(),!1)},this.on_keypress=function(t){if(this.$textarea.val()>=this.opts.text_length)return!1},this.on_paste=function(t){var e=this;t.originalEvent.clipboardData.getData("text/plain").slice(0,this.text_length),setTimeout(function(){e.on_change()},100)},this.on_input=function(t){this._go_submit||(peepso.observer.applyFilters("peepso_postbox_input_changed",this.$textarea.val()),this.update_beautifier())},this.on_change=function(){var t=this.$textarea.val(),e=t.length;(e=this.opts.text_length-e)<0&&(e=0),this.$charcount.html(e+""),50<=e?this.$charcount.removeClass("alert-info").removeClass("alert-error"):0===e?pswindow.show("","You may only enter up to "+this.opts.text_length+" characters"):e<30?this.$charcount.removeClass("alert-info").addClass("alert-error"):e<50&&this.$charcount.addClass("alert-info").removeClass("alert-error"),this.submitable(t)&&!peepso.observer.applyFilters("peepso_postbox_enter_to_send",!1)?this.$save_button.show():this.$save_button.hide();var n=t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br>");this.$mirror.html(n),this.addons_update()},this.submitable=function(t){var e,n,i,o,s=this,a=Math.max(0,this.opts.text_length-t.length),r=peepso.observer.applyFilters("peepso_postbox_can_submit",{hard:[],soft:[a<this.opts.text_length&&""!==jQuery.trim(t)]},this);return n=(e=r).hard,i=e.soft,o=!1,(o=n.length?-1===n.indexOf(!1):-1!==i.indexOf(!0))&&!s.beforeUnloadHandler?(s.beforeUnloadHandler=function(){return!0},peepso.observer.addFilter("beforeunload",s.beforeUnloadHandler)):!o&&s.beforeUnloadHandler&&(peepso.observer.removeFilter("beforeunload",s.beforeUnloadHandler),s.beforeUnloadHandler=null),o?s.$cancel_button.show():s.$cancel_button.hide(),r=r.hard.length?!(-1<r.hard.indexOf(!1)):-1<r.soft.indexOf(!0)},this.addons_update=jQuery.proxy(_.debounce(function(){var t=peepso.observer.applyFilters("peepso_postbox_addons_update",[]);if(t&&t.length){var e=this.$textarea.attr("placeholder");this.$textarea.data("placeholder",e).removeAttr("placeholder"),this.$addons.html("&mdash; "+t.join(" and ")),this.$addons.show()}else{e=this.$textarea.data("placeholder");this.$textarea.attr("placeholder",e),this.$addons.hide().empty()}},10),this),this.update_beautifier=_.throttle(function(){_.defer(_.bind(function(){var t,e,n;this.$beautifier||(this.$textarea.addClass("ps-tagging-textarea"),(t=this.$textarea.parent(".ps-tagging-wrapper")).length||(this.$textarea.wrap("<div class=ps-tagging-wrapper />"),t=this.$textarea.parent(".ps-tagging-wrapper")),this.$beautifier=t.children(".ps-tagging-beautifier"),this.$beautifier.length||(this.$beautifier=o("<div class=ps-tagging-beautifier />"),this.$beautifier.prependTo(t)),this.$textarea.focus()),(n=window._wpemojiSettings||{})&&n.supports&&(n.supports.everything=!0),e=this.$textarea.val()||"",e=(e=peepso.observer.applyFilters("peepso_postbox_beautifier",e,this.$textarea)).replace(/<(?!\/?ps_)/g,"&lt;").replace(/<(\/?)ps_/g,"<$1").replace(/\r?\n/g,"<br />"),this.$beautifier.html(e)},this))},100),this.init(t),this}},s.prototype.init=function(){var t=this,e=this;return peepso.observer.addFilter("peepso_postbox_can_submit",function(t){return t||e.can_submit},20,1),this.$activity_stream_recent=jQuery("#ps-activitystream-recent"),this.$activity_stream=jQuery("#ps-activitystream"),this.$postbox=jQuery("#postbox-main").pspostbox({postbox_req:function(t){return e.embedData&&(t.embed=e.embedData),t},on_save:function(t){return jQuery(this.$posttabs).find("[data-tab='status']").trigger("click"),e.append_to_stream(t)}}),void 0!==this.$postbox&&(this.$postbox.$textarea.on("blur",function(t){e.check_url_preview()}).on("keyup",function(t){32===t.keyCode&&e.check_url_preview()}),this.$postbox.on("postbox.post_saved postbox.post_cancel",function(){e.can_submit=!1,e.$url_preview_container.empty().remove(),t.embedData=null,t.embedExceptions=[]})),this.$postbox},s.prototype.check_url_preview=function(){var n=this;if(!this.fetching&&"status"===this.$postbox.$posttabs.current_tab().data("tab")){var t=peepsodata.embed||{};if(+t.enable&&!this.embedData){var i,e=this.$postbox.$textarea.val();if(i=(i=e.match(/(^|\s)(https?:\/\/)?([a-z0-9-]+\.)+((com|net|org|int|edu|gov|mil|biz|info|mobi|co|io|me)(\.[a-z]{2})?)(?![a-z])(:\d+)?(\/[^*\s]*)?/gi)||e.match(/(^|\s)(https?:\/\/)([a-z0-9-]+\.)+([a-z]{2,24})(:\d+)?(\/[^*\s]*)?/gi))&&i[0]&&i[0].trim())if(i.match(/^https?:\/\//i)||(i="https://".concat(i)),(+t.enable_non_ssl||i.match(/^https:\/\//i))&&!(this.embedExceptions&&-1<this.embedExceptions.indexOf(i))){this.fetching=!0;var o=this.$postbox.$textarea.closest(".ps-postbox-input"),s=this.$postbox.find(".ps-postbox-loading").show(),a=this.$postbox.find(".ps-postbox-action").css("display","none");peepso.modules.url.getEmbed(i).then(function(t){n.embedData=i;var e='<div class="url-preview ps-stream-container-narrow">\n\t\t\t\t<div class="close" style="text-align:right">\n\t\t\t\t\t<a href="#" class="ps-js-remove"><i class="ps-icon-remove"></i></a>\n\t\t\t\t</div>\n\t\t\t\t'.concat(t.html,"\n\t\t\t</div>");n.$url_preview_container.html(e).appendTo(o),n.$url_preview_container.on("click.ps-embed-remove",".ps-js-remove",function(){n.$url_preview_container.off("click.ps-embed-remove"),n.$url_preview_container.empty().remove(),n.embedData=null,n.embedExceptions.push(i)}),e.match(/\sdata-instgrm-permalink/)&&setTimeout(function(){try{window.instgrm.Embeds.process()}catch(t){}},1e3)}).catch(function(){}).then(function(){n.fetching=!1,s.hide(),a.css("display","flex")})}}}},s.prototype.append_to_stream=function(t){if(t.data&&+t.data.post_id){0<jQuery("#ps-no-posts").length&&(jQuery(this.$activity_stream.css("display","block")),jQuery("#ps-no-posts").remove());var e,n=t.data.post_id,i=jQuery("<div />").append(t.data.html);i=peepso.observer.applyFilters("peepso_activity",i),e=peepso.observer.applyFilters("peepso_activity_content",i.html());var o=jQuery(e).hide(),s=this.$activity_stream.children(".ps-js-activity-pinned");(s=s.filter(function(){var t=jQuery(this).prev(".ps-js-activity");return!t.length||t.hasClass("ps-js-activity-pinned")})).length&&!s.first().prev(".ps-js-activity").length?o.insertAfter(s.last()):o.prependTo(this.$activity_stream),o.fadeIn("slow",function(){jQuery(this).find(".comment-container").hide(),jQuery(document).trigger("ps_activitystream_append",[jQuery("#peepso-wrap .ps-js-activity--"+n+" .ps-js-dropdown-toggle")]),peepso.util.scrollIntoViewIfNeeded(this,{position:"center"})}),peepso.observer.doAction("peepso_activity_actions",o.find("[data-type=stream-action]")),o.find(".ps-stream-body input[name=peepso_set_human_friendly]").each(function(){var t,e,n=jQuery(this),i=n.siblings(".ps-js-activity-content"),o=i.closest(".ps-js-activity");!+peepsodata.is_admin&&+o.data("author")!=+peepsodata.currentuserid||(t=i.get(0).innerText.trim(),(e=peepso.observer.applyFilters("human_friendly_extras",[],t,o[0])).length&&(t&&e.unshift(t),t=e.join(". ")),t||(i=o.find(".ps-stream-header .ps-stream-action-title")).length&&(t=i.get(0).innerText.trim()),t=t.replace(/\r?\n/g," "),peepso.modules.post.setHumanReadable(n.val(),t))}),e.match(/\sdata-instgrm-permalink/)&&setTimeout(function(){try{window.instgrm.Embeds.process()}catch(t){}},1e3),peepso.observer.applyFilters("peepso_posttabs_cancel-status")}},s.prototype.remove_broken_thumbnails=function(){jQuery(".ps-media-thumbnail img").each(function(){var t=new Image,e=this;t.onerror=function(){jQuery(e).closest(".ps-media-thumbnail").remove()},t.src=e.src})},window.postbox=new s,jQuery(document).ready(function(){postbox.init()}),jQuery(function(){if(jQuery.support.placeholder=!1,"placeholder"in document.createElement("input")&&(jQuery.support.placeholder=!0),!jQuery.support.placeholder){var t=document.activeElement;jQuery("textarea").focus(function(){jQuery(this).attr("placeholder")&&0<jQuery(this).attr("placeholder").length&&""!==jQuery(this).attr("placeholder")&&jQuery(this).val()===jQuery(this).attr("placeholder")&&jQuery(this).val("").removeClass("hasPlaceholder")}).blur(function(){jQuery(this).attr("placeholder")&&0<jQuery(this).attr("placeholder").length&&""!==jQuery(this).attr("placeholder")&&(""===jQuery(this).val()||jQuery(this).val()===jQuery(this).attr("placeholder"))&&jQuery(this).val(jQuery(this).attr("placeholder")).addClass("hasPlaceholder")}),jQuery("textarea").blur(),jQuery(t).focus(),jQuery("form").submit(function(){jQuery(this).find(".hasPlaceholder").each(function(){jQuery(this).val("")})})}})},{}],17:[function(t,e,n){"use strict";t("./postbox"),t("./postbox-type"),t("./postbox-schedule")},{"./postbox":20,"./postbox-schedule":18,"./postbox-type":19}],18:[function(h,t,e){(function(t){"use strict";var e,i=(e="undefined"!=typeof window?window.jQuery:void 0!==t?t.jQuery:null)&&e.__esModule?e:{default:e},o="undefined"!=typeof window?window.peepso:void 0!==t?t.peepso:null,n="undefined"!=typeof window?window.peepsodata:void 0!==t?t.peepsodata:null,r=h("../datetime");function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],i=!0,o=!1,s=void 0;try{for(var a,r=t[Symbol.iterator]();!(i=(a=r.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){o=!0,s=t}finally{try{i||null==r.return||r.return()}finally{if(o)throw s}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var u=n.datetime&&n.datetime.text.monthNames,c=n.datetime&&n.datetime.text.am,l=n.datetime&&n.datetime.text.pm,p=function(){function e(t){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.$postbox=t,this.$container=this.$postbox.find("#schedule-tab"),this.$toggle=this.$container.find(".interaction-icon-wrapper"),this.$dropdown=this.$postbox.find(".ps-js-postbox-schedule"),this.$radio=this.$container.find("[type=radio]"),this.$datetime=this.$container.find(".ps-js-datetime"),this.$date=this.$container.find(".ps-js-date-dd"),this.$month=this.$container.find(".ps-js-date-mm"),this.$year=this.$container.find(".ps-js-date-yy"),this.$hour=this.$container.find(".ps-js-time-hh"),this.$minute=this.$container.find(".ps-js-time-mm"),this.$ampm=this.$container.find(".ps-js-time-ampm"),this.$done=this.$container.find(".ps-js-done"),this.dateSelector=null,this.timeSelector=null,this.$toggle.on("click",function(){return n.toggle()}),this.$done.on("click",function(){return n.hide()}),this.$dropdown.on("click","[data-option-value]",function(t){var e=(0,i.default)(t.currentTarget).data("optionValue");t.stopPropagation(),n.select(e),"now"===e&&n.hide()}),this.$postbox.on("postbox.post_cancel postbox.post_saved",function(){n.resetDateTime(),n.select("now")}),o.observer.addFilter("postbox_req",i.default.proxy(this.filterPostboxReq,this),10,1),o.observer.addFilter("postbox_data",i.default.proxy(this.filterPostboxData,this),10,2),o.observer.addAction("postbox_update",i.default.proxy(this.actionPostboxUpdate,this),10,2),o.observer.addAction("postbox_group_set",i.default.proxy(this.actionPostboxGroupSet,this),10,1),o.observer.addAction("postbox_group_reset",i.default.proxy(this.actionPostboxGroupReset,this),10,1)}return function(t,e,n){e&&s(t.prototype,e),n&&s(t,n)}(e,[{key:"toggle",value:function(){this.$dropdown.is(":hidden")?this.show():this.hide()}},{key:"show",value:function(){var e=this;this.$dropdown.show(),setTimeout(function(){var t="click.ps-postbox-schedule";(0,i.default)(document).off(t).one(t,function(){return e.hide()})},1)}},{key:"hide",value:function(){this.$dropdown.hide(),(0,i.default)(document).off("click.ps-postbox-schedule")}},{key:"value",value:function(){var t;return this.$radio.get(1).checked&&this.dateSelector&&this.timeSelector&&(t="".concat(this.dateSelector.getDate()," ").concat(this.timeSelector.getTime())),t}},{key:"select",value:function(t){"now"===t?(this.$radio.get(0).checked=!0,this.$datetime.hide(),this.$container.removeClass("active"),o.observer.doAction("postbox_schedule_reset",this.$postbox)):"future"===t&&(this.$radio.get(1).checked=!0,this.$datetime.show(),this.$container.addClass("active"),this.initDateTime(),o.observer.doAction("postbox_schedule_set",this.$postbox,this.value()))}},{key:"initDateTime",value:function(){var o=this;if(!this.dateSelector&&!this.timeSelector){var t=function(){var t,e,n,i=new Date;t=o.dateSelector.getDate().split("-"),e=o.timeSelector.getTime().split(":"),n=new Date(+t[0],t[1]-1,+t[2],+e[0],+e[1]),i.setHours(i.getHours()+1,i.getMinutes()+(15-i.getMinutes()%15),0),n<i&&o.timeSelector.setTime("".concat(i.getHours(),":").concat(i.getMinutes()))},e=u,n=new Date,i=new Date,s={monthNames:e,minDate:n,maxDate:i,onSelect:t},a={step:15,am:c,pm:l,onSelect:t};i.setFullYear(Math.max(2035,i.getFullYear()+1)),this.dateSelector=new r.DateSelector(this.$year[0],this.$month[0],this.$date[0],s),this.timeSelector=new r.TimeSelector(this.$hour[0],this.$minute[0],this.$ampm.length?this.$ampm[0]:a,this.$ampm.length?a:void 0),this.resetDateTime()}}},{key:"resetDateTime",value:function(){var t=new Date;t.setDate(t.getDate()+1),this.setDateTime(t)}},{key:"setDateTime",value:function(t){this.initDateTime();var e="".concat(t.getFullYear(),"-").concat(t.getMonth()+1,"-").concat(t.getDate()),n="".concat(t.getHours(),":").concat(t.getMinutes());this.dateSelector.setDate(e),this.timeSelector.setTime(n)}},{key:"filterPostboxReq",value:function(t){var e=this.value();return e&&(t.future=e),t}},{key:"filterPostboxData",value:function(t,e){if(e.$el===this.$postbox){var n=this.value();n&&(t.future=n)}return t}},{key:"actionPostboxUpdate",value:function(t,e){if(t.$el===this.$postbox)if(e.future){var n,i=a(e.future.split(" "),2),o=i[0],s=i[1];o=o.split("-"),s=s.split(":"),n=new Date(+o[0],o[1]-1,+o[2],+s[0],+s[1]),this.select("future"),this.setDateTime(n)}else this.select("now"),this.resetDateTime(),this.$container.hide()}},{key:"actionPostboxGroupSet",value:function(t){t===this.$postbox&&(this.select("now"),this.$container.hide())}},{key:"actionPostboxGroupReset",value:function(t){t===this.$postbox&&this.$container.show()}}]),e}();o.observer.addAction("peepso_postbox_addons",function(t){var e={init:function(){},set_postbox:function(t){t.find("#schedule-tab").length&&new p(t)}};return t.push(e),t},10,1),o.observer.addAction("postbox_init",function(t){var e=t.$el;e.find("#schedule-tab").length&&new p(e)},10,1)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../datetime":3}],19:[function(t,e,n){(function(t){"use strict";var e,i=(e="undefined"!=typeof window?window.jQuery:void 0!==t?t.jQuery:null)&&e.__esModule?e:{default:e},s="undefined"!=typeof window?window.peepso:void 0!==t?t.peepso:null;function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var n=function(){function e(t){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.$postbox=t,this.$container=this.$postbox.find("#type-tab"),this.$toggle=this.$container.find(".interaction-icon-wrapper"),this.$dropdown=this.$postbox.find(".ps-js-postbox-type"),this.defaultIcon=this.$toggle.children("a").find("i").attr("class"),this.defaultText=this.$toggle.children("a").find("span").html(),this.$toggle.on("click",function(){return n.toggle()}),this.$dropdown.on("click","[data-option-value]",function(t){var e=(0,i.default)(t.currentTarget).data("optionValue");t.stopPropagation(),n.select(e),n.hide()}),this.$postbox.on("postbox.post_saved",function(){"function"!=typeof s.observer.applyFilters("peepso_postbox_onsave",!1,n.$postbox)&&n.select("status")}),this.select("status")}return function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(e,[{key:"toggle",value:function(){this.$dropdown.is(":hidden")?this.show():this.hide()}},{key:"show",value:function(){var e=this;this.$dropdown.show(),setTimeout(function(){var t="click.ps-postbox-type";(0,i.default)(document).off(t).one(t,function(){return e.hide()})},1)}},{key:"hide",value:function(){this.$dropdown.hide(),(0,i.default)(document).off("click.ps-postbox-type")}},{key:"select",value:function(t){var e=this.$dropdown.find('[data-option-value="'.concat(t,'"]')),n=this.$toggle.children("a"),i=e.find("i"),o=n.find("i").filter(".".concat(i.attr("class")));e.length&&(e.addClass("active"),e.siblings(".active").removeClass("active"),o.addClass("active"),o.siblings(".active").removeClass("active"),s.observer.doAction("postbox_type_set",this.$postbox,t))}}]),e}();s.observer.addAction("peepso_postbox_addons",function(t){var e={init:function(){},set_postbox:function(t){t.find("#type-tab").length&&new n(t)}};return t.push(e),t},10,1),s.observer.addAction("postbox_init",function(t){t.$el.find("#type-tab").remove()},10,1)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],20:[function(t,e,n){"use strict";var o,s;o=jQuery,s=function(t,i){function e(){this.__constructor.apply(this,arguments)}return peepso.npm.objectAssign(e.prototype,PsObserver.prototype,{__constructor:function(t,e){var n=peepso.template(psdata_postbox.template);this.$el=i(t).html(n),this.$text=this.$el.find("textarea").ps_autosize(),this.$loading=this.$el.find(".ps-postbox-loading"),this.$btns=this.$el.find(".ps-postbox-action"),this.$btnCancel=this.$btns.find(".ps-button-cancel"),this.$btnSubmit=this.$btns.find(".ps-button-action"),this.$charCounter=this.$el.find(".ps-postbox-charcount"),this.$tabRoot=this.$el.find("div.ps-postbox-tab-root"),this.$tabContext=this.$el.find("nav.ps-postbox-tab"),this.$addons=this.$el.find(".ps-postbox-addons"),this.opts=i.extend({maxChars:+psdata_postbox.max_chars||4e3,fetch:!1,cancel:!1,submit:!1},e||{}),this.init()},init:function(){this.$text.val(""),this.updateButtonVisibility(),this.updateCharCounter(),this.addAction("refresh",this.refresh,10,1,this),this.$tabContext.find("#privacy-tab").remove(),this.$tabContext.find("#status-post").remove(),peepso.observer.doAction("postbox_init",this),this.fetch().done(function(){this.$text.on("focus.ps-postbox",i.proxy(this.onFocus,this)),this.$text.on("input.ps-postbox",i.proxy(this.onInput,this)),this.$btnSubmit.on("click.ps-postbox",i.proxy(this.onSubmit,this)),this.$btnCancel.on("click.ps-postbox",i.proxy(this.onCancel,this)),this.$tabRoot.on("click.ps-postbox","li[data-tab]",i.proxy(this.onTabChange,this))})},fetch:function(){return i.Deferred(i.proxy(function(t){"function"==typeof this.opts.fetch?(this.$btns.hide(),this.$loading.show(),this.opts.fetch(this,i.proxy(function(){this.$loading.hide(),this.$btns.css("display","flex"),t.resolveWith(this)},this))):t.resolveWith(this)},this))},update:function(t){this.$text.val(t.content||"").trigger("input"),this.updateButtonVisibility(),this.updateCharCounter(),this.doAction("update",t),peepso.observer.doAction("postbox_update",this,t)},reset:function(){this.$text.val(""),this.updateButtonVisibility(),this.updateCharCounter(),this.doAction("reset"),peepso.observer.doAction("postbox_reset",this)},refresh:function(){this.renderAddons(),this.updateButtonVisibility(),this.updateCharCounter()},_getData:function(){return{content:this.$text.val()}},getData:function(){var t=this._getData();return t=this.applyFilters("data",t),t=peepso.observer.applyFilters("postbox_data",t,this)},tabChange:function(t){var e=this.$tabRoot.find("li[data-tab]"),n=e.filter('[data-tab="'+t+'"]');n.length&&(e.not(n).removeClass("active"),n.addClass("active"),this.currentTab=t)},getActiveTab:function(){return this.currentTab||(this.currentTab=this.$tabRoot.find("li.active").data("tab")),this.currentTab},validate:function(){var t=this._getData(),e=!!i.trim(t.content);return this.applyFilters("data_validate",e,t)},submit:function(){"function"==typeof this.opts.submit&&this.validate()&&(this.$btns.hide(),this.$loading.show(),this.opts.submit(this,this.getData(),i.proxy(function(){this.$loading.hide(),this.$btns.css("display","flex")},this)))},cancel:function(){this.reset(),this.$tabContext.hide(),this.$tabRoot.show(),"function"==typeof this.opts.cancel&&this.opts.cancel(this)},updateCharCounter:_.throttle(function(){var t=this.$text.val().length,e=Math.max(0,this.opts.maxChars-t);this.$charCounter.html(e)},250),updateButtonVisibility:_.throttle(function(){this.validate()?this.$btnSubmit.show():this.$btnSubmit.hide()},250),renderAddons:_.throttle(function(){var t=this.applyFilters("render_addons",[]).join(" and ");t=t&&"&mdash; "+t,this.$addons.html(t)},250),destroy:function(){this.$el.empty()},onFocus:function(){this.$tabRoot.hide(),this.$tabContext.show()},onInput:function(){this.updateButtonVisibility(),this.updateCharCounter()},onCancel:function(){this.cancel()},onSubmit:function(){this.submit()},onTabChange:function(t){var e=i(t.currentTarget).data("tab");this.tabChange(e)}}),e}("PsPostbox",o),o.fn.ps_postbox=function(n,i){return this.each(function(){var t=o(this),e=t.data("ps-postbox");e&&"string"==typeof n?(e[n].call(e,i),"destroy"===n&&t.removeData("ps-postbox")):e||(e=new s(t,n||{}),t.data("ps-postbox",e))})}},{}],21:[function(t,e,n){"use strict";var o;(o=jQuery).fn.ps_posttabs=function(t){return this._tabs=null,this._tabs_div={},this.tab_objects={},this.orig_html={},this.options={container:this},this.init=function(t){var n=this;o.extend(!0,this.options,t),o("[data-tab-id]",this.options.container).each(function(t,e){n._tabs_div[o(e).data("tab-id")]=o(e)}),this._tabs=this.find("[data-tab]"),this._tabs.on("click",function(t){var e=o(t.currentTarget);n.current_tab_id=e.data("tab"),n.show_tab(e)}).first().trigger("click"),jQuery(this.options.container).on("click",".ps-postbox-tab.interactions .ps-button-cancel",function(){n.on_cancel()}),jQuery(this.options.container).on("click",".ps-postbox-tab.interactions .postbox-submit",function(){n.on_submit()})},this.show_tab=function(t){var e=this.current_tab();e.removeClass("active");var n=this.get_tab(e.data("tab"));n.hide(),o(this).trigger("peepso_posttabs_cancel-"+e.data("tab"),[n,this]),o(t).addClass("active");var i=this.get_tab(o(t).data("tab"));o(this).trigger("peepso_posttabs_show-"+o(t).data("tab"),[i,this])},this.current_tab=function(){return o("[data-tab]",this.options.container).filter(".active")},this.get_tab=function(t){return _.isUndefined(this._tabs_div[t])?o(""):this._tabs_div[t]},this.on_submit=function(){var t=this.current_tab();peepso.observer.applyFilters("peepso_posttabs_submit-"+t.data("tab")),o(this).trigger("peepso_posttabs_submit-"+t.data("tab")),o(this).trigger("peepso_posttabs_submit",[t,this])},this.on_cancel=function(){var t=this.current_tab();o(this).trigger("peepso_posttabs_cancel-"+t.data("tab"),[t,this]),o(this).trigger("peepso_posttabs_cancel",[t,this]),t.trigger("click")},this.init(t),this}},{}],22:[function(t,e,n){(function(t){"use strict";var e,n=(e="undefined"!=typeof window?window.jQuery:void 0!==t?t.jQuery:null)&&e.__esModule?e:{default:e};n.default.fn.psSafetyWarning=function(){return this.each(function(t,e){(0,n.default)(e).find(".ps-js-close").on("click",function(t){(0,n.default)(t.target).closest(".ps-js-safety-warning").remove()})})},(0,n.default)(function(){(0,n.default)(".ps-js-safety-warning").psSafetyWarning()})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],23:[function(t,e,n){"use strict";function i(){}window.share=new i,i.prototype.share_url=function(t){var e,n;return t=encodeURIComponent(t),e=jQuery("#share-dialog-title").html(),n=function(t,e,n){return n.replace(new RegExp(t,"g"),e)}("--peepso-url--",t,n=jQuery("#share-dialog-content").html()),(n=jQuery(n)).filter(".ps-list--share").find("a.ps-list__item").on("click",function(t){t.preventDefault(),t.stopPropagation();var e=Math.max(0,(window.innerWidth-550)/2||0),n=Math.max(0,(window.innerHeight-400)/2||0),i=["toolbar=no","location=no","status=no","menubar=no","scrollbars=yes","resizable=yes","width=".concat(550),"height=".concat(400),"left=".concat(e),"top=".concat(n)].join(",");window.open(this.href,"targetWindow",i),pswindow.hide()}),pswindow.show(e,n),!1}},{}],24:[function(t,e,n){"use strict";jQuery(function(t){var e=t("#peepso-wrap");if(e.length){var n=e.closest(".et_pb_row");n.length&&n.find(".et_pb_column").css({zIndex:"auto"})}})},{}],25:[function(t,e,n){"use strict";var i,o;i=window,o=function(f,i){function v(){return Math.floor((new Date).getTime()/1e3)}function t(){this.ts=v();this.diff=f.peepsotimedata.ts-this.ts}return t.prototype.human_time_diff=function(t,e){var n,i,o,s,a,r,u,c,l=86400,p=7*l,h=365*l,d=f.peepsotimedata||{};return t=+t,e=e||v(),e+=this.diff,(n=Math.abs(e-t))<60?c=d.now:n<3600?c=(1<(i=(i=Math.round(n/60))<=1?1:i)?d.mins:d.min).replace("%s",i):n<l&&3600<=n?c=(1<(o=(o=Math.round(n/3600))<=1?1:o)?d.hours:d.hour).replace("%s",o):n<p&&l<=n?c=(1<(s=(s=Math.round(n/l))<=1?1:s)?d.days:d.day).replace("%s",s):n<30*l&&p<=n?c=(1<(a=(a=Math.round(n/p))<=1?1:a)?d.weeks:d.week).replace("%s",a):n<h&&30*l<=n?c=(1<(r=(r=Math.round(n/(30*l)))<=1?1:r)?d.months:d.month).replace("%s",r):h<=n&&(c=(1<(u=(u=Math.round(n/h))<=1?1:u)?d.years:d.year).replace("%s",u)),peepso.observer.applyFilters("human_time_diff",c,n,t,e)},i(function(){setInterval(function(){var n=v();i(".ps-js-autotime").each(function(){var t=i(this),e=t.data("timestamp");e&&t.html(ps_time.human_time_diff(e,n))})},4e4)}),t}(i,jQuery),i.ps_time=new o},{}],26:[function(t,e,n){"use strict";t("./widgetme"),t("./widget-latest-members"),t("./widget-online-members")},{"./widget-latest-members":27,"./widget-online-members":28,"./widgetme":29}],27:[function(t,e,n){"use strict";var i,o;i=jQuery,o=function(u){return{init:function t(){var r="ps-js-initialized",e=u(".ps-js-widget-latest-members").not("."+r);e.each(u.proxy(function(t,e){var n=u(e).addClass(r),i=n.find(".ps-js-widget-content"),o=+n.data("hideempty"),s=+n.data("totalmember"),a=+n.data("limit");this.getData(a,s).done(function(t,e){if(e&&o){i.empty();n.hide()}else{i.html(t);n.show()}})},this))},getData:function t(i,o){return u.Deferred(function(e){var t="widgetajax.latest_members",n={};setTimeout(function(){n.limit=+i;n.totalmember=o?1:0;peepso.getJson(t,n,function(t){if(t.success){e.resolve(t.data.html,+t.data.empty)}else{e.reject()}})},3e3)})}}}(i),peepso.widget=peepso.widget||{},peepso.widget.latestMembers=o,i(i.proxy(o.init,o))},{}],28:[function(t,e,n){"use strict";var i,o;i=jQuery,o=function(c){return{init:function t(){var u="ps-js-initialized",e=c(".ps-js-widget-online-members").not("."+u);e.each(c.proxy(function(t,e){var n=c(e).addClass(u),i=n.find(".ps-js-widget-content"),o=+n.data("hideempty"),s=+n.data("totalmember"),a=+n.data("totalonline"),r=+n.data("limit");this.getData(r,s,a).done(function(t,e){if(e&&o){i.empty();n.hide()}else{i.html(t);n.show()}})},this))},getData:function t(i,o,s){return c.Deferred(function(e){var t="widgetajax.online_members",n={};setTimeout(function(){n.limit=+i;n.totalmember=o?1:0;n.totalonline=s?1:0;peepso.getJson(t,n,function(t){if(t.success){e.resolve(t.data.html,+t.data.empty)}else{e.reject()}})},3e3)})}}}(i),peepso.widget=peepso.widget||{},peepso.widget.onlineMembers=o,i(i.proxy(o.init,o))},{}],29:[function(t,e,n){"use strict";var i;(i=jQuery)(function(){new(function(t){function e(){this.$el=t(".ps-widget--profile");if(this.$el.length){this.init()}}return e.prototype={init:function(){this.$el.find(".ps-widget--profile__notifications").length&&peepso.observer.doAction("notification_start"),this.$coverImage=this.$el.find(".ps-widget--profile__cover-image"),this.$coverImage.length&&peepso.observer.addAction("profile_cover_update",this.coverUpdate,10,2,this)},coverUpdate:function(t,e){+t==+peepsodata.currentuserid&&this.$coverImage.css("background","url("+e+") no-repeat center center")}},e}(i))})},{}],30:[function(t,e,n){var i,o;i="undefined"!=typeof window?window:this,o=function(){"use strict";function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var n=this._events=this._events||{},i=n[t]=n[t]||[];return-1==i.indexOf(e)&&i.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var n=this._onceEvents=this._onceEvents||{};return(n[t]=n[t]||{})[e]=!0,this}},e.off=function(t,e){var n=this._events&&this._events[t];if(n&&n.length){var i=n.indexOf(e);return-1!=i&&n.splice(i,1),this}},e.emitEvent=function(t,e){var n=this._events&&this._events[t];if(n&&n.length){n=n.slice(0),e=e||[];for(var i=this._onceEvents&&this._onceEvents[t],o=0;o<n.length;o++){var s=n[o];i&&i[s]&&(this.off(t,s),delete i[s]),s.apply(this,e)}return this}},e.allOff=function(){delete this._events,delete this._onceEvents},t},"function"==typeof define&&define.amd?define(o):"object"==typeof e&&e.exports?e.exports=o():i.EvEmitter=o()},{}],31:[function(t,i,e){!function(e,n){"use strict";"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(t){return n(e,t)}):"object"==typeof i&&i.exports?i.exports=n(e,t("ev-emitter")):e.imagesLoaded=n(e,e.EvEmitter)}("undefined"!=typeof window?window:this,function(e,t){"use strict";var o=e.jQuery,s=e.console;function a(t,e){for(var n in e)t[n]=e[n];return t}var r=Array.prototype.slice;function u(t,e,n){if(!(this instanceof u))return new u(t,e,n);var i=t;"string"==typeof t&&(i=document.querySelectorAll(t)),i?(this.elements=function(t){return Array.isArray(t)?t:"object"==typeof t&&"number"==typeof t.length?r.call(t):[t]}(i),this.options=a({},this.options),"function"==typeof e?n=e:a(this.options,e),n&&this.on("always",n),this.getImages(),o&&(this.jqDeferred=new o.Deferred),setTimeout(this.check.bind(this))):s.error("Bad element for imagesLoaded "+(i||t))}(u.prototype=Object.create(t.prototype)).options={},u.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},u.prototype.addElementImages=function(t){"IMG"==t.nodeName&&this.addImage(t),!0===this.options.background&&this.addElementBackgroundImages(t);var e=t.nodeType;if(e&&c[e]){for(var n=t.querySelectorAll("img"),i=0;i<n.length;i++){var o=n[i];this.addImage(o)}if("string"==typeof this.options.background){var s=t.querySelectorAll(this.options.background);for(i=0;i<s.length;i++){var a=s[i];this.addElementBackgroundImages(a)}}}};var c={1:!0,9:!0,11:!0};function n(t){this.img=t}function i(t,e){this.url=t,this.element=e,this.img=new Image}return u.prototype.addElementBackgroundImages=function(t){var e=getComputedStyle(t);if(e)for(var n=/url\((['"])?(.*?)\1\)/gi,i=n.exec(e.backgroundImage);null!==i;){var o=i&&i[2];o&&this.addBackground(o,t),i=n.exec(e.backgroundImage)}},u.prototype.addImage=function(t){var e=new n(t);this.images.push(e)},u.prototype.addBackground=function(t,e){var n=new i(t,e);this.images.push(n)},u.prototype.check=function(){var i=this;function e(t,e,n){setTimeout(function(){i.progress(t,e,n)})}this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?this.images.forEach(function(t){t.once("progress",e),t.check()}):this.complete()},u.prototype.progress=function(t,e,n){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded,this.emitEvent("progress",[this,t,e]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,t),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&s&&s.log("progress: "+n,t,e)},u.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(t,[this]),this.emitEvent("always",[this]),this.jqDeferred){var e=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[e](this)}},(n.prototype=Object.create(t.prototype)).check=function(){this.getIsImageComplete()?this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.proxyImage.src=this.img.src)},n.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},n.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.img,e])},n.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},n.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},n.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},n.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},(i.prototype=Object.create(n.prototype)).check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},i.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},i.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.element,e])},u.makeJQueryPlugin=function(t){(t=t||e.jQuery)&&((o=t).fn.imagesLoaded=function(t,e){return new u(this,t,e).jqDeferred.promise(o(this))})},u.makeJQueryPlugin(),u})},{"ev-emitter":30}],32:[function(t,i,e){(function(t){var e,n;e=this,n=function(){var e,R="object"==typeof self&&self.self===self&&self||"object"==typeof t&&t.global===t&&t||this,H=R.document;function n(a,r){"use strict";function e(){}var s,t,u={},c={},l=(r=r||{}).auto||0,n=!1,p=function(t){setTimeout(t||e,0)},h={addEventListener:!!R.addEventListener,touch:"ontouchstart"in R||R.DocumentTouch&&H instanceof DocumentTouch,transitions:function(t){var e=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"];for(var n in e)if(void 0!==t.style[e[n]])return!0;return!1}(H.createElement("swipe"))};if(a){var d,f,v,m,b=a.children[0],y=parseInt(r.startSlide,10)||0,g=r.speed||300;r.continuous=void 0===r.continuous||r.continuous;var i,o,w,_=(o="direction",(i=a).currentStyle?w=i.currentStyle[o]:R.getComputedStyle&&(w=R.getComputedStyle(i,null).getPropertyValue(o)),"rtl"===w?"right":"left");r.autoRestart=void 0!==r.autoRestart&&r.autoRestart;var $=function(n,i){i=i||100;var o=null;function s(){o&&clearTimeout(o)}function t(){var t=this,e=arguments;s(),o=setTimeout(function(){o=null,n.apply(t,e)},i)}return t.cancel=s,t}(D),x={handleEvent:function(t){if(!n){switch(t.type){case"mousedown":case"touchstart":this.start(t);break;case"mousemove":case"touchmove":this.move(t);break;case"mouseup":case"mouseleave":case"touchend":this.end(t);break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":this.transitionEnd(t);break;case"resize":$()}r.stopPropagation&&t.stopPropagation()}},start:function(t){var e;F(t)?(e=t).preventDefault():e=t.touches[0],u={x:e.pageX,y:e.pageY,time:+new Date},s=void 0,c={},F(t)?(b.addEventListener("mousemove",this,!1),b.addEventListener("mouseup",this,!1),b.addEventListener("mouseleave",this,!1)):(b.addEventListener("touchmove",this,!1),b.addEventListener("touchend",this,!1))},move:function(t){var e;if(F(t))e=t;else{if(1<t.touches.length||t.scale&&1!==t.scale)return;r.disableScroll&&t.preventDefault(),e=t.touches[0]}c={x:e.pageX-u.x,y:e.pageY-u.y},void 0===s&&(s=!!(s||Math.abs(c.x)<Math.abs(c.y))),s||(t.preventDefault(),L(),r.continuous?(O(M(y-1),c.x+f[M(y-1)],0),O(y,c.x+f[y],0),O(M(y+1),c.x+f[M(y+1)],0)):(c.x=c.x/(!y&&0<c.x||y===d.length-1&&c.x<0?Math.abs(c.x)/v+1:1),O(y-1,c.x+f[y-1],0),O(y,c.x+f[y],0),O(y+1,c.x+f[y+1],0)))},end:function(t){var e=new Date-u.time,n=Number(e)<250&&20<Math.abs(c.x)||Math.abs(c.x)>v/2,i=!y&&0<c.x||y===d.length-1&&c.x<0;r.continuous&&(i=!1);var o=Math.abs(c.x)/c.x;s||(n&&!i?(y=o<0?(r.continuous?(P(M(y-1),-v,0),P(M(y+2),v,0)):P(y-1,-v,0),P(y,f[y]-v,g),P(M(y+1),f[M(y+1)]-v,g),M(y+1)):(r.continuous?(P(M(y+1),v,0),P(M(y-2),-v,0)):P(y+1,v,0),P(y,f[y]+v,g),P(M(y-1),f[M(y-1)]+v,g),M(y-1)),E(Q(),d[y],o)):r.continuous?(P(M(y-1),-v,g),P(y,0,g),P(M(y+1),v,g)):(P(y-1,-v,g),P(y,0,g),P(y+1,v,g))),F(t)?(b.removeEventListener("mousemove",x,!1),b.removeEventListener("mouseup",x,!1),b.removeEventListener("mouseleave",x,!1)):(b.removeEventListener("touchmove",x,!1),b.removeEventListener("touchend",x,!1))},transitionEnd:function(t){parseInt(t.target.getAttribute("data-index"),10)===y&&((l||r.autoRestart)&&I(),C(Q(),d[y]))}};return D(),S(),{setup:D,slide:function(t,e){L(),A(t,e)},prev:function(){L(),function(){if(n)return;r.continuous?A(y-1):y&&A(y-1)}()},next:function(){L(),T()},restart:I,stop:L,getPos:Q,disable:function(){L(),n=!0},enable:function(){n=!1,I()},getNumSlides:function(){return m},kill:function(){L(),a.style.visibility="",b.style.width="",b.style[_]="";var t=d.length;for(;t--;){h.transitions&&O(t,0,0);var e=d[t];if(e.getAttribute("data-cloned"))e.parentElement.removeChild(e);e.style.width="",e.style[_]="",e.style.webkitTransitionDuration=e.style.MozTransitionDuration=e.style.msTransitionDuration=e.style.OTransitionDuration=e.style.transitionDuration="",e.style.webkitTransform=e.style.msTransform=e.style.MozTransform=e.style.OTransform=""}j(),$.cancel()}}}function j(){h.addEventListener?(b.removeEventListener("touchstart",x,!1),b.removeEventListener("mousedown",x,!1),b.removeEventListener("webkitTransitionEnd",x,!1),b.removeEventListener("msTransitionEnd",x,!1),b.removeEventListener("oTransitionEnd",x,!1),b.removeEventListener("otransitionend",x,!1),b.removeEventListener("transitionend",x,!1),R.removeEventListener("resize",x,!1)):R.onresize=null}function k(t){var e=t.cloneNode(!0);b.appendChild(e),e.setAttribute("data-cloned",!0),e.removeAttribute("id")}function D(t){if(null!=t)for(var e in t)r[e]=t[e];d=b.children,m=d.length;for(var n=0;n<d.length;n++)d[n].getAttribute("data-cloned")&&m--;if(d.length<2&&(r.continuous=!1),h.transitions&&r.continuous&&d.length<3&&(k(d[0]),k(d[1]),d=b.children),"right"===_)for(var i=0;i<d.length;i++)d[i].style.float="right";f=new Array(d.length),v=a.getBoundingClientRect().width||a.offsetWidth,b.style.width=d.length*v*2+"px";for(var o=d.length;o--;){var s=d[o];s.style.width=v+"px",s.setAttribute("data-index",o),h.transitions&&(s.style[_]=o*-v+"px",P(o,o<y?-v:y<o?v:0,0))}r.continuous&&h.transitions&&(P(M(y-1),-v,0),P(M(y+1),v,0)),h.transitions||(b.style[_]=y*-v+"px"),a.style.visibility="visible",j(),h.addEventListener?(h.touch&&b.addEventListener("touchstart",x,!1),r.draggable&&b.addEventListener("mousedown",x,!1),h.transitions&&(b.addEventListener("webkitTransitionEnd",x,!1),b.addEventListener("msTransitionEnd",x,!1),b.addEventListener("oTransitionEnd",x,!1),b.addEventListener("otransitionend",x,!1),b.addEventListener("transitionend",x,!1)),R.addEventListener("resize",x,!1)):R.onresize=$}function T(){n||(r.continuous?A(y+1):y<d.length-1&&A(y+1))}function E(t,e,n){r.callback&&r.callback(t,e,n)}function C(t,e){r.transitionEnd&&r.transitionEnd(t,e)}function M(t){return(d.length+t%d.length)%d.length}function Q(){var t=y;return m<=t&&(t-=m),t}function A(t,e){if(t="number"!=typeof t?parseInt(t,10):t,y!==t){if(h.transitions){var n=Math.abs(y-t)/(y-t);if(r.continuous){var i=n;(n=-f[M(t)]/v)!==i&&(t=-n*d.length+t)}for(var o=Math.abs(y-t)-1;o--;)P(M((y<t?t:y)-o-1),v*n,0);t=M(t),P(y,v*n,e||g),P(t,0,e||g),r.continuous&&P(M(t-n),-v*n,0)}else t=M(t),function(e,n,i){if(!i)return b.style[_]=n+"px";var o=+new Date,s=setInterval(function(){var t=new Date-o;if(i<t)return b.style[_]=n+"px",(l||r.autoRestart)&&I(),C(Q(),d[y]),void clearInterval(s);b.style[_]=(n-e)*(Math.floor(t/i*100)/100)+e+"px"},4)}(y*-v,t*-v,e||g);y=t,p(function(){E(Q(),d[y],n)})}}function P(t,e,n){O(t,e,n),f[t]=e}function O(t,e,n){var i=d[t],o=i&&i.style;o&&(o.webkitTransitionDuration=o.MozTransitionDuration=o.msTransitionDuration=o.OTransitionDuration=o.transitionDuration=n+"ms",o.webkitTransform="translate("+e+"px,0)translateZ(0)",o.msTransform=o.MozTransform=o.OTransform="translateX("+e+"px)")}function S(){(l=r.auto||0)&&(t=setTimeout(T,l))}function L(){l=0,clearTimeout(t)}function I(){L(),S()}function F(t){return/^mouse/.test(t.type)}}return(R.jQuery||R.Zepto)&&((e=R.jQuery||R.Zepto).fn.Swipe=function(t){return this.each(function(){e(this).data("Swipe",new n(e(this)[0],t))})}),n},"function"==typeof define&&define.amd?define([],function(){return e.Swipe=n(),e.Swipe}):"object"==typeof i&&i.exports?i.exports=n():e.Swipe=n()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10]);