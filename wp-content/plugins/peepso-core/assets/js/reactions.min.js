!function(t){reactions=new(function(c){var r='<img src="'+peepsoreactionsdata.ajaxloader+'"/>';function t(){var t=c(document.body);t.on("keyup",c.proxy(this._on_document_keyup,this));t.on("click",c.proxy(this._on_document_click,this))}return t.prototype.action_reactions=function(t,a){var e=c(".ps-reaction-toggle--"+a),s=c(".ps-js-act-reactions-options--"+a),o=c(".ps-reaction-option-delete--"+a),i=s.find(".ps-reaction-option").not(".ps-reaction-option-delete"),n=s.find(".ps-reactions__list");1!==i.length?(e.hasClass("liked")?(o.show(),n.addClass("ps-reactions__list--selected")):(o.hide(),n.removeClass("ps-reactions__list--selected")),s.fadeToggle(200)):e.hasClass("liked")?o.click():i.click()},t.prototype.action_react=function(t,a,e,s){if(!this.action_react_progress){this.action_react_progress=!0;var o={act_id:a,post_id:e,react_id:s},i=this,n=c(".ps-js-act-reactions--"+a);c(".ps-js-act-reactions-options--"+a).fadeOut(200),$like_span=c(".ps-reaction-toggle--"+a+":first-child"),$like_a=c(".ps-reaction-toggle--"+a),$like_a.removeClass(),$like_a.addClass("ps-reaction-toggle--"+a+" ps-js-reaction-toggle"),$like_a.addClass("ps-icon-reaction"),$like_a.addClass("liked"),$like_a.addClass("ps-reaction-emoticon-"+s),n.animate({opacity:.5}),$like_span.html(r),peepso.postJson("reactionsajax.react",o,function(t){var a="ps-stream-reactions-hidden";i.action_react_progress=!1,t.success?(c.isNumeric(t.data.reaction_mine_id)&&$like_span.html("<span>"+t.data.reaction_mine_label+"<span>"),t.data.html_reactions?(n.removeClass(a),n.html(t.data.html_reactions).animate({opacity:1})):(n.addClass(a),n.html(""))):alert("Something went wrong")})}},t.prototype.action_react_delete=function(t,a,e){if(!this.action_react_progress){this.action_react_progress=!0;var s={act_id:a,post_id:e},o=this,i=c(".ps-js-act-reactions--"+a);c(".ps-reaction-option--"+a).removeClass("ps-reaction-option-selected"),c(".ps-js-act-reactions-options--"+a).fadeOut(200),$like_span=c(".ps-reaction-toggle--"+a+":first-child"),$like_span.html(r),$like_a=c(".ps-reaction-toggle--"+a),$like_a.removeClass(),$like_a.addClass("ps-reaction-toggle--"+a+" ps-js-reaction-toggle"),$like_a.addClass("ps-icon-reaction"),$like_a.removeClass("liked"),$like_a.addClass("ps-reaction-emoticon-0"),i.animate({opacity:.5}),peepso.postJson("reactionsajax.react_delete",s,function(t){var a="ps-stream-reactions-hidden";o.action_react_progress=!1,t.success?(c.isNumeric(t.data.reaction_mine_id)||$like_span.html("<span>"+t.data.reaction_mine_label+"<span>"),t.data.html_reactions?(i.removeClass(a),i.html(t.data.html_reactions).animate({opacity:1})):(i.addClass(a),i.html(""))):alert("Something went wrong")})}},t.prototype.action_html_reactions=function(t,a){if(!this.action_react_progress){this.action_react_progress=!0;var e={act_id:a},s=this,o=c(".ps-js-act-reactions--"+a);o.html(o.html()+" "+r),o.animate({opacity:.5}),peepso.postJson("reactionsajax.html_reactions",e,function(t){s.action_react_progress=!1,t.success?o.html(t.data.html_reactions).animate({opacity:1}):alert("Something went wrong")})}},t.prototype.action_html_reactions_details=function(t,a,e){if(!this.action_react_progress){this.action_react_progress=!0;var s={act_id:a},o=this,i=c(".ps-js-act-reactions--"+a),n=i.html();i.animate({opacity:.5}),i.html(n+" "+r),peepso.postJson("reactionsajax.html_reactions_details",s,function(t){o.action_react_progress=!1,i.html(t.success?t.data.html_reactions:n).animate({opacity:1})})}},t.prototype._on_document_keyup=function(t){27===t.keyCode&&c(".ps-js-reaction-options:visible").fadeOut(200)},t.prototype._on_document_click=function(t){var a,e=c(t.target).closest(".ps-js-reaction-options, .ps-js-reaction-toggle");e.length?(a=e.closest(".ps-stream-actions").nextAll(".ps-js-reaction-options"),c(".ps-js-reaction-options:visible").not(a).fadeOut(200)):c(".ps-js-reaction-options:visible").fadeOut(200)},t}(t))}(jQuery);