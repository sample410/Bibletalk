!function r(s,o,l){function u(e,t){if(!o[e]){if(!s[e]){var i="function"==typeof require&&require;if(!t&&i)return i(e,!0);if(h)return h(e,!0);var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}var n=o[e]={exports:{}};s[e][0].call(n.exports,function(t){return u(s[e][1][t]||t)},n,n.exports,r,s,o,l)}return o[e].exports}for(var h="function"==typeof require&&require,t=0;t<l.length;t++)u(l[t]);return u}({1:[function(t,e,g){(function(t){"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var e,o=(e="undefined"!=typeof window?window.jQuery:void 0!==t?t.jQuery:null)&&e.__esModule?e:{default:e},l="undefined"!=typeof window?window.peepso:void 0!==t?t.peepso:null,i="undefined"!=typeof window?window.peepsodata:void 0!==t?t.peepsodata:null;function a(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}i.hashtags.url;var n,r,s,u=+i.hashtags.everything||0,h=u?0:+i.hashtags.min_length||0,p=u?1e4:+i.hashtags.max_length||1e4,f=u?0:+i.hashtags.must_start_with_letter||0,d=(r=u?"(^|>|\\s)(#([^#\\s<]+))":"(^|>|\\s)(#("+((n=f)?"[a-z]":"")+"[a-z0-9]{"+Math.max(0,h-(n?1:0))+","+Math.max(0,p-(n?1:0))+"}))",new RegExp(r,"ig")),c=function(){function e(){var t=this;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),s||((s=this).hashtag=void 0,this.$filter=null,this.$toggle=null,this.$input=null,this.$apply=null,this.assignHooks(),(0,o.default)(function(){t.initActivityFilter()})),s}return function(t,e,i){e&&a(t.prototype,e),i&&a(t,i)}(e,[{key:"filter",value:function(t){var e=this,i=this.hashtag;if(this.hashtag=t){var a=this.$toggle.data("keyword")+t+' <i class="ps-icon-remove"></i>';this.$toggle.html(a),this.$toggle.one("click","i",function(){e.filter("")});var n=(0,o.default)("#postbox-main textarea.ps-postbox-textarea").eq(0);n.length&&!n.val()&&n.val("#".concat(t," ")).trigger("input")}else{var r=this.$toggle.data("empty");this.$toggle.html(r);var s=(0,o.default)("#postbox-main textarea.ps-postbox-textarea").eq(0);s.length&&s.val()==="#".concat(i," ")&&s.val("").trigger("input")}this.$input.val(t),l.observer.doAction("peepso_stream_reset")}},{key:"assignHooks",value:function(){var e=this;l.observer.addFilter("peepso_postbox_beautifier",function(t){return t.replace(d,function(t,e,i,a){return e+'<ps_span class="ps-tag">'+i+"</ps_span>"})},20,1),l.observer.addFilter("peepso_activity",function(t){return e.hashtag&&(t=t.map(function(){var t=(0,o.default)(this),e=t.html();return t.closest(".ps-js-activity").length&&"string"==typeof e&&!e.match(d)?null:this})),t},20,1),l.observer.addFilter("show_more_posts",function(t){return e.hashtag&&(t.search_hashtag=e.hashtag),t},10,1)}},{key:"initActivityFilter",value:function(){var r=this;this.$filter=(0,o.default)(".ps-js-activitystream-filter").filter("[data-id=peepso_search_hashtag]"),this.$toggle=this.$filter.find(".ps-js-dropdown-toggle span"),this.$input=this.$filter.find("input[type=text]"),this.$apply=this.$filter.find(".ps-js-search-hashtag"),this.$input.on("input",function(t){var e=t.target,i=e.value,a=i.replace(u?/[#\s<]/g:/[^a-z0-9]/gi,""),n=a.length;i!==a&&(e.value=a),n<h||p<n?r.$apply.attr("disabled","disabled"):r.$apply.removeAttr("disabled")}).triggerHandler("input"),this.$input.on("keyup",function(t){13===t.keyCode&&(t.preventDefault(),t.stopPropagation(),r.$apply.click())}),this.$apply.on("click",function(){var t=o.default.trim(r.$input.val()),e=t.length;h<=e&&e<=p&&r.filter(t)});var t=decodeURIComponent(window.location.href),e=u?/\/\??hashtag\/([^#\s<\/]+)/:/\/\??hashtag\/([a-z0-9]+)/i,i=t.match(e);i&&this.filter(i[1])}}]),e}();new(g.default=c)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1]);